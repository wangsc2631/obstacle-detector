<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#0ea5e9" />
  <meta name="description" content="ËÄÅÊ±™ËºîÂä©Â∞éËà™Á≥ªÁµ± - Âç≥ÊôÇÈöúÁ§ôÁâ©Ê™¢Ê∏¨ËàáGPSËøîËà™" />
  <title>üß≠ ËÄÅÊ±™ËºîÂä©Â∞éËà™Á≥ªÁµ±</title>
  
  <!-- PWA ÊîØÊåÅ -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß≠</text></svg>">
  
  <!-- TensorFlow.js Âíå COCO-SSD -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.15.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.3/dist/coco-ssd.min.js"></script>
  
  <style>
    /* ‰øùÊåÅÂéüÊúâÁöÑ CSS Ê®£Âºè‰∏çËÆä */
    :root {
      --bg1: #0ea5e9;
      --bg2: #6366f1;
      --glass: rgba(255,255,255,0.12);
      --glass-strong: rgba(255,255,255,0.22);
      --text: #fff;
      --good: #22c55e;
      --warn: #f59e0b;
      --bad: #ef4444;
      --muted: #cbd5e1;
      --shadow: 0 10px 30px rgba(0,0,0,0.25);
    }
    
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang TC', 'Microsoft JhengHei', sans-serif;
      color: var(--text);
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      touch-action: manipulation;
    }
    
    body {
      padding: 10px;
      padding-bottom: env(safe-area-inset-bottom, 10px);
    }
    
    .app {
      max-width: 100%;
      margin: 0 auto;
      display: grid;
      gap: 12px;
      grid-template-columns: 1fr;
    }
    
    @media (min-width: 920px) {
      .app {
        grid-template-columns: 6fr 4fr;
      }
    }
    
    .card {
      background: var(--glass);
      backdrop-filter: blur(12px);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    
    header.card {
      padding: 14px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    
    header h1 {
      font-size: clamp(18px, 5vw, 24px);
      margin: 0;
      font-weight: 700;
    }
    
    header .tips {
      font-size: 12px;
      color: var(--muted);
      display: none;
    }
    
    @media (min-width: 768px) {
      header .tips {
        display: block;
      }
    }
    
    .camera {
      position: relative;
      width: 100%;
      aspect-ratio: 16/9;
      background: #000;
      border-radius: 12px;
    }
    
    .camera video, .camera canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 12px;
    }
    
    /* ÁßªÈô§Èè°ÂÉèÊïàÊûú */
    .camera video {
      transform: scaleX(1);
    }
    
    .panel {
      padding: 16px;
    }
    
    .controls {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }
    
    @media (min-width: 480px) {
      .controls {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    button.btn {
      padding: 16px 12px;
      border: none;
      border-radius: 14px;
      font-weight: 700;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      min-height: 54px;
      user-select: none;
    }
    
    button.btn:active {
      transform: translateY(2px) scale(0.98);
    }
    
    .primary {
      background: var(--good);
      color: #fff;
    }
    
    .warning {
      background: var(--warn);
      color: #fff;
    }
    
    .danger {
      background: var(--bad);
      color: #fff;
    }
    
    .secondary {
      background: var(--glass-strong);
      color: var(--text);
    }
    
    .status {
      display: grid;
      gap: 8px;
      grid-template-columns: repeat(2, 1fr);
      margin-bottom: 12px;
    }
    
    @media (min-width: 480px) {
      .status {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .status-item {
      background: var(--glass-strong);
      border-radius: 12px;
      padding: 12px;
      text-align: center;
    }
    
    .status-item .k {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 4px;
    }
    
    .status-item .v {
      font-weight: 800;
      font-size: clamp(14px, 4vw, 16px);
    }
    
    .voice-alert {
      margin: 12px 0;
      background: rgba(239,68,68,0.15);
      border: 1px solid rgba(239,68,68,0.35);
      color: #fff;
      border-radius: 12px;
      padding: 16px;
      text-align: center;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      line-height: 1.4;
    }
    
    .list {
      max-height: 200px;
      overflow-y: auto;
      display: grid;
      gap: 6px;
      padding-right: 4px;
      -webkit-overflow-scrolling: touch;
    }
    
    .chip {
      background: var(--glass-strong);
      padding: 10px;
      border-radius: 10px;
      font-size: 13px;
      line-height: 1.4;
    }
    
    footer {
      text-align: center;
      font-size: 11px;
      color: var(--muted);
      padding: 8px;
      margin-top: 10px;
    }
    
    .module-tag {
      display: inline-block;
      background: var(--warn);
      color: white;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 10px;
      margin-left: 8px;
      font-weight: 600;
    }
    
    .gps-active {
      background: var(--good) !important;
    }
    
    .emergency-alert {
      animation: pulse 1s infinite;
      border: 2px solid var(--bad);
    }
    
    .loading {
      background: linear-gradient(90deg, var(--bg1), var(--bg2), var(--bg1));
      background-size: 200% 100%;
      animation: loading 2s infinite;
    }
    
    .obstacle-warning {
      background: rgba(245,158,11,0.3);
      border: 2px solid var(--warn);
    }
    
    .danger-warning {
      background: rgba(239,68,68,0.3);
      border: 2px solid var(--bad);
    }
    
    @keyframes pulse {
      0% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
      100% {
        opacity: 1;
      }
    }
    
    @keyframes loading {
      0% {
        background-position: 200% 0;
      }
      100% {
        background-position: -200% 0;
      }
    }
    
    /* ÊâãÊ©üÂÑ™Âåñ */
    @media (max-width: 480px) {
      body {
        padding: 8px;
      }
      
      .panel {
        padding: 12px;
      }
      
      button.btn {
        padding: 14px 10px;
        font-size: 13px;
        min-height: 50px;
      }
      
      .status-item {
        padding: 10px;
      }
      
      .voice-alert {
        padding: 14px;
        min-height: 55px;
        font-size: 14px;
      }
    }
    
    /* Èò≤Ê≠¢ÊñáÂ≠óÈÅ∏Êìá */
    .no-select {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™Á≥ªÁµ± */
    .safety-corridor {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10;
      display: none;
    }
    
    .safety-corridor.active {
      display: block;
    }
    
    .corridor-path {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%;
      height: 60%;
      background: linear-gradient(90deg, 
        rgba(34, 197, 94, 0.1) 0%, 
        rgba(34, 197, 94, 0.3) 30%, 
        rgba(34, 197, 94, 0.3) 70%, 
        rgba(34, 197, 94, 0.1) 100%);
      border-radius: 20px;
      border: 2px dashed rgba(34, 197, 94, 0.5);
      animation: pathGlow 2s ease-in-out infinite alternate;
    }
    
    .corridor-left {
      position: absolute;
      left: 10%;
      top: 20%;
      width: 20%;
      height: 60%;
      background: rgba(245, 158, 11, 0.1);
      border: 2px solid rgba(245, 158, 11, 0.3);
      border-radius: 10px;
    }
    
    .corridor-right {
      position: absolute;
      right: 10%;
      top: 20%;
      width: 20%;
      height: 60%;
      background: rgba(245, 158, 11, 0.1);
      border: 2px solid rgba(245, 158, 11, 0.3);
      border-radius: 10px;
    }
    
    .corridor-front {
      position: absolute;
      left: 30%;
      top: 10%;
      width: 40%;
      height: 20%;
      background: rgba(239, 68, 68, 0.1);
      border: 2px solid rgba(239, 68, 68, 0.3);
      border-radius: 10px;
    }
    
    .obstacle-left {
      background: rgba(239, 68, 68, 0.2) !important;
      border: 2px solid rgba(239, 68, 68, 0.5) !important;
      animation: dangerPulse 1s infinite;
    }
    
    .obstacle-right {
      background: rgba(239, 68, 68, 0.2) !important;
      border: 2px solid rgba(239, 68, 68, 0.5) !important;
      animation: dangerPulse 1s infinite;
    }
    
    .obstacle-front {
      background: rgba(239, 68, 68, 0.3) !important;
      border: 2px solid rgba(239, 68, 68, 0.7) !important;
      animation: dangerPulse 0.5s infinite;
    }
    
    .navigation-guidance {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 15px 20px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      text-align: center;
      z-index: 20;
      max-width: 90%;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      display: none;
    }
    
    .navigation-guidance.active {
      display: block;
    }
    
    @keyframes pathGlow {
      0% {
        box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
      }
      100% {
        box-shadow: 0 0 40px rgba(34, 197, 94, 0.6);
      }
    }
    
    @keyframes dangerPulse {
      0% {
        opacity: 0.7;
      }
      50% {
        opacity: 1;
      }
      100% {
        opacity: 0.7;
      }
    }

    /* Ê®°ÂûãËºâÂÖ•ÈÄ≤Â∫¶Ê¢ù */
    .progress-container {
      width: 100%;
      height: 6px;
      background: var(--glass-strong);
      border-radius: 3px;
      margin: 10px 0;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: var(--good);
      border-radius: 3px;
      transition: width 0.3s ease;
      width: 0%;
    }

    /* Áí∞Â¢ÉÊåáÁ§∫Âô® */
    .environment-indicator {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-right: 5px;
    }
    
    .indoor-indicator { background: #2196F3; }
    .outdoor-indicator { background: #4CAF50; }
    .auto-indicator { background: #FF9800; }
  </style>
</head>
<body class="no-select">
  <div class="app">
    <header class="card">
      <h1>üß≠ Áõ≤‰∫∫ËºîÂä©Â∞éËà™</h1>
      <div class="tips">ÂÆâÂÖ®Âá∫Ë°å ¬∑ Êô∫ËÉΩÁí∞Â¢ÉÊ™¢Ê∏¨ ¬∑ GPSÂ∞éËà™</div>
    </header>

    <section class="card camera">
      <video id="video" autoplay playsinline muted></video>
      <canvas id="canvas"></canvas>
      
      <!-- ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™Á≥ªÁµ± -->
      <div id="safetyCorridor" class="safety-corridor">
        <div class="corridor-path"></div>
        <div id="corridorLeft" class="corridor-left"></div>
        <div id="corridorRight" class="corridor-right"></div>
        <div id="corridorFront" class="corridor-front"></div>
      </div>
      
      <div id="navigationGuidance" class="navigation-guidance">
        ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™‰∏≠...
      </div>
    </section>

    <section class="card panel">
      <div id="voiceAlert" class="voice-alert loading">Á≥ªÁµ±ÂàùÂßãÂåñ‰∏≠‚Ä¶</div>
      
      <!-- Ê®°ÂûãËºâÂÖ•ÈÄ≤Â∫¶ -->
      <div id="progressContainer" class="progress-container" style="display: none;">
        <div id="progressBar" class="progress-bar"></div>
      </div>
      
      <!-- ‰∏ªË¶ÅÊéßÂà∂ÊåâÈàï -->
      <div class="controls">
        <button id="btnStart" class="btn primary">ÈñãÂßãÊ™¢Ê∏¨</button>
        <button id="btnVoice" class="btn secondary">Ë™ûÈü≥ÈóúÈñâ</button>
        <button id="btnMode" class="btn primary">Êô∫ËÉΩÊ®°Âºè</button>
        <button id="btnStop" class="btn danger">ÂÅúÊ≠¢</button>
      </div>
      
      <!-- Â∞éËà™ÊéßÂà∂ÊåâÈàï -->
      <div class="controls">
        <button id="btnSetHome" class="btn primary">Ë®≠ÂÆöÂÆ∂ÁöÑ‰ΩçÁΩÆ</button>
        <button id="btnReturnHome" class="btn warning">ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™</button>
        <button id="btnLoadModule" class="btn primary">ÊâãÂãïÂàáÊèõÁí∞Â¢É</button>
        <button id="btnInfrared" class="btn secondary">Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù</button>
        <button id="btnEmergency" class="btn danger">Á∑äÊÄ•Ê±ÇÂä©</button>
      </div>

      <!-- ÁãÄÊÖãË≥áË®ä -->
      <div class="status">
        <div class="status-item">
          <div class="k">Á≥ªÁµ±ÁãÄÊÖã</div>
          <div class="v" id="status">Ê∫ñÂÇô‰∏≠</div>
        </div>
        <div class="status-item">
          <div class="k">ÂÅµÊ∏¨ÈÄüÂ∫¶</div>
          <div class="v" id="fps">‚Äî</div>
        </div>
        <div class="status-item">
          <div class="k">ÈöúÁ§ôÁâ©Êï∏</div>
          <div class="v" id="obstacleCount">0</div>
        </div>
        <div class="status-item">
          <div class="k">ÊúÄËøëË∑ùÈõ¢</div>
          <div class="v" id="closestDistance">‚Äî ÂÖ¨Â∞∫</div>
        </div>
      </div>
      
      <div class="status">
        <div class="status-item">
          <div class="k">GPSÁãÄÊÖã</div>
          <div class="v" id="gpsStatus">Êú™ÈÄ£Êé•</div>
        </div>
        <div class="status-item">
          <div class="k">Ë∑ùÂÆ∂Ë∑ùÈõ¢</div>
          <div class="v" id="homeDistance">--</div>
        </div>
        <div class="status-item">
          <div class="k">Áí∞Â¢ÉÂà§Êñ∑</div>
          <div class="v" id="currentModule">
            <span class="environment-indicator auto-indicator"></span>Ëá™Âãï
          </div>
        </div>
        <div class="status-item">
          <div class="k">Ë™ûÈü≥ÁãÄÊÖã</div>
          <div class="v" id="voiceStatus">ÈñãÂïü</div>
        </div>
      </div>
      
      <!-- Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÈ°ØÁ§∫ -->
      <div id="infraredDisplay" class="status-item" style="display: none;">
        <div class="k">Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù</div>
        <div class="v">-- ÂÖ¨Â∞∫</div>
      </div>
    </section>

    <aside class="card panel">
      <h3 style="margin:0 0 12px 0; font-size:16px;">
        Âç≥ÊôÇÂÅµÊ∏¨ <span id="activeModuleTag" class="module-tag">Êô∫ËÉΩÊ®°Âºè</span>
      </h3>
      <div id="detectionList" class="list">
        <div class="chip" style="text-align:center; color:var(--muted);">
          Á≠âÂæÖÈñãÂßãÂÅµÊ∏¨‚Ä¶
        </div>
      </div>
      <footer>
        Â∞àÁÇ∫Ë¶ñÈöúÊúãÂèãË®≠Ë®à ¬∑ Êô∫ËÉΩÁí∞Â¢ÉË≠òÂà•<br>
        Ëá™ÂãïÂà§Êñ∑ÂÆ§ÂÖßÂ§ñÁí∞Â¢ÉÔºåÊ™¢Ê∏¨Êõ¥Â§öÂ±ÖÂÆ∂Áâ©ÂìÅ
      </footer>
    </aside>
  </div>

  <script>
    /**********************
     * 1) ÂèÉÊï∏Ë®≠ÂÆö
     **********************/
    const TARGET_FPS = 15;
    const INTERVAL = 1000 / TARGET_FPS;
    const SCORE_THRESHOLD = 0.6; // ÊèêÈ´òÈñæÂÄºÊ∏õÂ∞ëË™§Âà§
    const MIN_CONFIDENCE_FOR_PERSON = 0.7; // Ë°å‰∫∫Ê™¢Ê∏¨ÈúÄË¶ÅÊõ¥È´òÁΩÆ‰ø°Â∫¶

    /**********************
     * 2) Êì¥Â±ïÁí∞Â¢ÉÊ®°ÁµÑÁ≥ªÁµ± - Â¢ûÂä†Âú∞Èù¢ÈöúÁ§ôÁâ©ÂíåÈ´òÂ∫¶Â∑ÆÊ™¢Ê∏¨
     **********************/
    const environmentModules = {
      outdoor: {
        name: 'Êà∂Â§ñÂ∞éËà™',
        objects: {
          'car': { name: 'Ê±ΩËªä', danger: 'high', voice: 'ÂâçÊñπÊúâÊ±ΩËªäÔºåË´ã‰øùÊåÅÂÆâÂÖ®Ë∑ùÈõ¢' },
          'motorcycle': { name: 'Êë©ÊâòËªä', danger: 'high', voice: 'Ê≥®ÊÑèÔºÅÂâçÊñπÊúâÊë©ÊâòËªä' },
          'bus': { name: 'ÂÖ¨Ëªä', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂÖ¨Ëªä' },
          'truck': { name: 'Âç°Ëªä', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂç°Ëªä' },
          'bicycle': { name: 'ËÖ≥Ë∏èËªä', danger: 'medium', voice: 'ÂâçÊñπÊúâËÖ≥Ë∏èËªä' },
          'traffic light': { name: 'Á¥ÖÁ∂†Ááà', danger: 'medium', voice: 'ÂâçÊñπÊúâÁ¥ÖÁ∂†ÁáàÔºåË´ãÊ≥®ÊÑè‰∫§ÈÄöËôüË™å' },
          'stop sign': { name: 'ÂÅúÊ≠¢Ê®ôË™å', danger: 'medium', voice: 'ÂÅúÊ≠¢Ê®ôË™åÔºåË´ãÂÅúËªäËßÄÂØü' },
          'person': { name: 'Ë°å‰∫∫', danger: 'medium', voice: 'ÂâçÊñπÊúâË°å‰∫∫' },
          'bench': { name: 'Èï∑Ê§Ö', danger: 'low', voice: 'ÂâçÊñπÊúâÈï∑Ê§Ö' },
          'fire hydrant': { name: 'Ê∂àÈò≤Ê†ì', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ∂àÈò≤Ê†ì' },
          'parking meter': { name: 'ÂÅúËªäË®àÊôÇÂô®', danger: 'low', voice: 'ÂâçÊñπÊúâÂÅúËªäË®àÊôÇÂô®' },
          'traffic cone': { name: '‰∫§ÈÄöÈåê', danger: 'medium', voice: 'ÂâçÊñπÊúâ‰∫§ÈÄöÈåêÔºåÊñΩÂ∑•ÂçÄÂüü' },
          'pothole': { name: 'ÂùëÊ¥û', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂùëÊ¥ûÔºåË´ãÁπûË°å' },
          'crack': { name: 'Ë∑ØÈù¢Ë£ÇÁ∏´', danger: 'medium', voice: 'ÂâçÊñπÊúâË∑ØÈù¢Ë£ÇÁ∏´ÔºåË´ãÂ∞èÂøÉ' },
          'manhole': { name: '‰∫∫Â≠îËìã', danger: 'medium', voice: 'ÂâçÊñπÊúâ‰∫∫Â≠îËìãÔºåË´ãÊ≥®ÊÑè' },
          'curb': { name: 'Ë∑ØÁ∑£Áü≥', danger: 'medium', voice: 'ÂâçÊñπÊúâË∑ØÁ∑£Áü≥ÔºåË´ãÊä¨ËÖ≥' },
          'grate': { name: 'ÊéíÊ∞¥Ê†ºÊüµ', danger: 'medium', voice: 'ÂâçÊñπÊúâÊéíÊ∞¥Ê†ºÊüµÔºåË´ãÂ∞èÂøÉ' },
          'train': { name: 'ÁÅ´Ëªä', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÁÅ´ËªäÔºåË´ãÈÅ†Èõ¢ËªåÈÅì' },
          'airplane': { name: 'È£õÊ©ü', danger: 'high', voice: 'ÂâçÊñπÊúâÈ£õÊ©ü' },
          'boat': { name: 'Ëàπ', danger: 'high', voice: 'ÂâçÊñπÊúâËàπÔºåË´ãÈÅ†Èõ¢Ê∞¥Âüü' },
          'bird': { name: 'È≥•', danger: 'low', voice: 'ÂâçÊñπÊúâÈ≥•' },
          'cat': { name: 'Ë≤ì', danger: 'low', voice: 'ÂâçÊñπÊúâË≤ì' },
          'dog': { name: 'Áãó', danger: 'medium', voice: 'ÂâçÊñπÊúâÁãóÔºåË´ãÂ∞èÂøÉ' },
          'horse': { name: 'È¶¨', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÈ¶¨ÔºåË´ã‰øùÊåÅË∑ùÈõ¢' },
          'sheep': { name: 'Áæä', danger: 'medium', voice: 'ÂâçÊñπÊúâÁæä' },
          'cow': { name: 'Áâõ', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÁâõÔºåË´ã‰øùÊåÅË∑ùÈõ¢' },
          'tree': { name: 'Ê®π', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ®π' },
          'flower': { name: 'Ëä±', danger: 'low', voice: 'ÂâçÊñπÊúâËä±' },
          'grass': { name: 'ËçâÂú∞', danger: 'low', voice: 'ÂâçÊñπÊúâËçâÂú∞' },
          'building': { name: 'Âª∫ÁØâÁâ©', danger: 'medium', voice: 'ÂâçÊñπÊúâÂª∫ÁØâÁâ©' },
          'house': { name: 'ÊàøÂ±ã', danger: 'medium', voice: 'ÂâçÊñπÊúâÊàøÂ±ã' },
          'skyscraper': { name: 'Êë©Â§©Â§ßÊ®ì', danger: 'medium', voice: 'ÂâçÊñπÊúâÊë©Â§©Â§ßÊ®ì' },
          'bridge': { name: 'Ê©ãÊ®ë', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ©ãÊ®ë' },
          'fountain': { name: 'Âô¥Ê≥â', danger: 'medium', voice: 'ÂâçÊñπÊúâÂô¥Ê≥â' },
          'statue': { name: 'ÈõïÂÉè', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõïÂÉè' },
          'crosswalk': { name: 'ÊñëÈ¶¨Á∑ö', danger: 'medium', voice: 'ÂâçÊñπÊúâÊñëÈ¶¨Á∑öÔºåË´ãÊ≥®ÊÑè‰æÜËªä' },
          'sidewalk': { name: '‰∫∫Ë°åÈÅì', danger: 'low', voice: 'ÂâçÊñπÊúâ‰∫∫Ë°åÈÅì' },
          'street lamp': { name: 'Ë∑ØÁáà', danger: 'medium', voice: 'ÂâçÊñπÊúâË∑ØÁáà' },
          'billboard': { name: 'Âª£ÂëäÁúãÊùø', danger: 'low', voice: 'ÂâçÊñπÊúâÂª£ÂëäÁúãÊùø' },
          'bus stop': { name: 'ÂÖ¨ËªäÁ´ô', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÖ¨ËªäÁ´ô' },
          'train station': { name: 'ÁÅ´ËªäÁ´ô', danger: 'medium', voice: 'ÂâçÊñπÊúâÁÅ´ËªäÁ´ô' },
          'airport': { name: 'Ê©üÂ†¥', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ©üÂ†¥' },
          'park': { name: 'ÂÖ¨Âúí', danger: 'low', voice: 'ÂâçÊñπÊúâÂÖ¨Âúí' },
          'playground': { name: 'ÈÅäÊ®ÇÂ†¥', danger: 'medium', voice: 'ÂâçÊñπÊúâÈÅäÊ®ÇÂ†¥' },
          'beach': { name: 'Êµ∑ÁÅò', danger: 'medium', voice: 'ÂâçÊñπÊúâÊµ∑ÁÅò' },
          'mountain': { name: 'Â±±', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂ±±ÔºåË´ãÂ∞èÂøÉÂú∞ÂΩ¢' },
          'river': { name: 'Ê≤≥ÊµÅ', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÊ≤≥ÊµÅÔºåË´ãÈÅ†Èõ¢Ê∞¥Âüü' },
          'lake': { name: 'ÊπñÊ≥ä', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÊπñÊ≥äÔºåË´ãÈÅ†Èõ¢Ê∞¥Âüü' },
          'ocean': { name: 'Êµ∑Ê¥ã', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÊµ∑Ê¥ãÔºåË´ãÈÅ†Èõ¢Ê∞¥Âüü' }
        },
        triggers: ['car', 'motorcycle', 'bus', 'traffic light', 'stop sign', 'person', 'pothole', 'curb', 'train', 'dog', 'cow', 'mountain', 'river']
      },
      indoor: {
        name: 'ÂÆ§ÂÖßÁí∞Â¢É',
        objects: {
          'chair': { name: 'Ê§ÖÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ§ÖÂ≠êÔºåË´ãÁπûË°å' },
          'couch': { name: 'Ê≤ôÁôº', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ≤ôÁôº' },
          'bed': { name: 'Â∫ä', danger: 'medium', voice: 'ÂâçÊñπÊúâÂ∫ä' },
          'dining table': { name: 'È§êÊ°å', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ§êÊ°å' },
          'potted plant': { name: 'ÁõÜÊ†Ω', danger: 'low', voice: 'ÂâçÊñπÊúâÁõÜÊ†Ω' },
          'tv': { name: 'ÈõªË¶ñ', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõªË¶ñ' },
          'laptop': { name: 'Á≠ÜË®òÂûãÈõªËÖ¶', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõªËÖ¶' },
          'mouse': { name: 'ÊªëÈº†', danger: 'low', voice: 'ÂâçÊñπÊúâÊªëÈº†' },
          'remote': { name: 'ÈÅôÊéßÂô®', danger: 'low', voice: 'ÂâçÊñπÊúâÈÅôÊéßÂô®' },
          'keyboard': { name: 'ÈçµÁõ§', danger: 'low', voice: 'ÂâçÊñπÊúâÈçµÁõ§' },
          'cell phone': { name: 'ÊâãÊ©ü', danger: 'low', voice: 'ÂâçÊñπÊúâÊâãÊ©ü' },
          'book': { name: 'Êõ∏Êú¨', danger: 'low', voice: 'ÂâçÊñπÊúâÊõ∏Êú¨' },
          'vase': { name: 'Ëä±Áì∂', danger: 'medium', voice: 'ÂâçÊñπÊúâËä±Áì∂ÔºåÊòìÁ¢éÁâ©ÂìÅË´ãÂ∞èÂøÉ' },
          'clock': { name: 'ÊôÇÈêò', danger: 'low', voice: 'ÂâçÊñπÊúâÊôÇÈêò' },
          'scissors': { name: 'Ââ™ÂàÄ', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂâ™ÂàÄÔºåÈãíÂà©Áâ©ÂìÅË´ãÂ∞èÂøÉ' },
          'bottle': { name: 'Áì∂Â≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÁì∂Â≠ê' },
          'cup': { name: 'ÊùØÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊùØÂ≠ê' },
          'bowl': { name: 'Á¢ó', danger: 'medium', voice: 'ÂâçÊñπÊúâÁ¢ó' },
          'fork': { name: 'ÂèâÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÂèâÂ≠ê' },
          'knife': { name: 'ÂàÄÂ≠ê', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂàÄÂ≠êÔºåÈãíÂà©Áâ©ÂìÅË´ãÂ∞èÂøÉ' },
          'spoon': { name: 'ÊπØÂåô', danger: 'low', voice: 'ÂâçÊñπÊúâÊπØÂåô' },
          'teddy bear': { name: 'Áé©ÂÖ∑ÁÜä', danger: 'low', voice: 'ÂâçÊñπÊúâÁé©ÂÖ∑ÁÜä' },
          'umbrella': { name: 'Èõ®ÂÇò', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõ®ÂÇò' },
          'handbag': { name: 'ÊâãÊèêÂåÖ', danger: 'low', voice: 'ÂâçÊñπÊúâÊâãÊèêÂåÖ' },
          'backpack': { name: 'ËÉåÂåÖ', danger: 'low', voice: 'ÂâçÊñπÊúâËÉåÂåÖ' },
          'rug': { name: 'Âú∞ÊØØ', danger: 'low', voice: 'ÂâçÊñπÊúâÂú∞ÊØØÔºåË´ãÊ≥®ÊÑèÈÇäÁ∑£' },
          'threshold': { name: 'ÈñÄÊ™ª', danger: 'medium', voice: 'ÂâçÊñπÊúâÈñÄÊ™ªÔºåË´ãÊä¨ËÖ≥' },
          'step': { name: 'Âè∞Èöé', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂè∞ÈöéÔºåË´ãÂ∞èÂøÉ‰∏ä‰∏ã' },
          'stair': { name: 'Ê®ìÊ¢Ø', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÊ®ìÊ¢ØÔºåË´ãÂ∞èÂøÉ‰∏ä‰∏ã' },
          'cable': { name: 'ÈõªÁ∑ö', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõªÁ∑öÔºåË´ãÂ∞èÂøÉÁµÜÂÄí' },
          'toy': { name: 'Áé©ÂÖ∑', danger: 'medium', voice: 'ÂâçÊñπÊúâÁé©ÂÖ∑ÔºåË´ãÂ∞èÂøÉ' },
          'table': { name: 'Ê°åÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ°åÂ≠ê' },
          'desk': { name: 'Êõ∏Ê°å', danger: 'medium', voice: 'ÂâçÊñπÊúâÊõ∏Ê°å' },
          'cabinet': { name: 'Ê´ÉÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ´ÉÂ≠ê' },
          'shelf': { name: 'Êû∂Â≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊû∂Â≠ê' },
          'drawer': { name: 'ÊäΩÂ±ú', danger: 'low', voice: 'ÂâçÊñπÊúâÊäΩÂ±ú' },
          'mirror': { name: 'Èè°Â≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÈè°Â≠êÔºåË´ãÂ∞èÂøÉÁ¢∞Êíû' },
          'picture': { name: 'Áï´', danger: 'low', voice: 'ÂâçÊñπÊúâÁï´' },
          'frame': { name: 'Áõ∏Ê°Ü', danger: 'low', voice: 'ÂâçÊñπÊúâÁõ∏Ê°Ü' },
          'lamp': { name: 'Ááà', danger: 'low', voice: 'ÂâçÊñπÊúâÁáà' },
          'light': { name: 'ÁáàÂÖâ', danger: 'low', voice: 'ÂâçÊñπÊúâÁáàÂÖâ' },
          'fan': { name: 'È¢®Êâá', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ¢®Êâá' },
          'air conditioner': { name: 'ÂÜ∑Ê∞£Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÜ∑Ê∞£Ê©ü' },
          'heater': { name: 'ÊöñÊ∞£Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÊöñÊ∞£Ê©ü' },
          'window': { name: 'Á™óÊà∂', danger: 'medium', voice: 'ÂâçÊñπÊúâÁ™óÊà∂' },
          'door': { name: 'ÈñÄ', danger: 'medium', voice: 'ÂâçÊñπÊúâÈñÄ' },
          'curtain': { name: 'Á™óÁ∞æ', danger: 'low', voice: 'ÂâçÊñπÊúâÁ™óÁ∞æ' },
          'blinds': { name: 'ÁôæËëâÁ™ó', danger: 'low', voice: 'ÂâçÊñπÊúâÁôæËëâÁ™ó' },
          'wall': { name: 'ÁâÜÂ£Å', danger: 'medium', voice: 'ÂâçÊñπÊúâÁâÜÂ£Å' },
          'floor': { name: 'Âú∞Êùø', danger: 'low', voice: 'ÂâçÊñπÊúâÂú∞Êùø' },
          'ceiling': { name: 'Â§©Ëä±Êùø', danger: 'low', voice: 'ÂâçÊñπÊúâÂ§©Ëä±Êùø' },
          'pillow': { name: 'ÊûïÈ†≠', danger: 'low', voice: 'ÂâçÊñπÊúâÊûïÈ†≠' },
          'blanket': { name: 'ÊØØÂ≠ê', danger: 'low', voice: 'ÂâçÊñπÊúâÊØØÂ≠ê' },
          'sheet': { name: 'Â∫äÂñÆ', danger: 'low', voice: 'ÂâçÊñπÊúâÂ∫äÂñÆ' },
          'clothes': { name: 'Ë°£Êúç', danger: 'low', voice: 'ÂâçÊñπÊúâË°£Êúç' },
          'shoes': { name: 'ÈûãÂ≠ê', danger: 'low', voice: 'ÂâçÊñπÊúâÈûãÂ≠ê' },
          'hat': { name: 'Â∏ΩÂ≠ê', danger: 'low', voice: 'ÂâçÊñπÊúâÂ∏ΩÂ≠ê' },
          'glasses': { name: 'ÁúºÈè°', danger: 'low', voice: 'ÂâçÊñπÊúâÁúºÈè°' },
          'watch': { name: 'ÊâãÈå∂', danger: 'low', voice: 'ÂâçÊñπÊúâÊâãÈå∂' },
          'jewelry': { name: 'Áè†ÂØ∂', danger: 'low', voice: 'ÂâçÊñπÊúâÁè†ÂØ∂' },
          'wallet': { name: 'Èå¢ÂåÖ', danger: 'low', voice: 'ÂâçÊñπÊúâÈå¢ÂåÖ' },
          'keys': { name: 'Èë∞Âåô', danger: 'low', voice: 'ÂâçÊñπÊúâÈë∞Âåô' },
          'phone': { name: 'ÈõªË©±', danger: 'low', voice: 'ÂâçÊñπÊúâÈõªË©±' },
          'computer': { name: 'ÈõªËÖ¶', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõªËÖ¶' },
          'printer': { name: 'Âç∞Ë°®Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂç∞Ë°®Ê©ü' },
          'scanner': { name: 'ÊéÉÊèèÂô®', danger: 'low', voice: 'ÂâçÊñπÊúâÊéÉÊèèÂô®' },
          'camera': { name: 'Áõ∏Ê©ü', danger: 'low', voice: 'ÂâçÊñπÊúâÁõ∏Ê©ü' },
          'speaker': { name: 'ÂñáÂè≠', danger: 'low', voice: 'ÂâçÊñπÊúâÂñáÂè≠' },
          'headphones': { name: 'ËÄ≥Ê©ü', danger: 'low', voice: 'ÂâçÊñπÊúâËÄ≥Ê©ü' },
          'microphone': { name: 'È∫•ÂÖãÈ¢®', danger: 'low', voice: 'ÂâçÊñπÊúâÈ∫•ÂÖãÈ¢®' },
          'game console': { name: 'ÈÅäÊà≤Ê©ü', danger: 'low', voice: 'ÂâçÊñπÊúâÈÅäÊà≤Ê©ü' },
          'television': { name: 'ÈõªË¶ñÊ©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõªË¶ñÊ©ü' },
          'radio': { name: 'Êî∂Èü≥Ê©ü', danger: 'low', voice: 'ÂâçÊñπÊúâÊî∂Èü≥Ê©ü' },
          'cd player': { name: 'CDÊí≠ÊîæÂô®', danger: 'low', voice: 'ÂâçÊñπÊúâCDÊí≠ÊîæÂô®' },
          'dvd player': { name: 'DVDÊí≠ÊîæÂô®', danger: 'low', voice: 'ÂâçÊñπÊúâDVDÊí≠ÊîæÂô®' },
          'blu-ray player': { name: 'ËóçÂÖâÊí≠ÊîæÂô®', danger: 'low', voice: 'ÂâçÊñπÊúâËóçÂÖâÊí≠ÊîæÂô®' },
          'projector': { name: 'ÊäïÂΩ±Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÊäïÂΩ±Ê©ü' },
          'screen': { name: 'Ëû¢Âπï', danger: 'medium', voice: 'ÂâçÊñπÊúâËû¢Âπï' },
          'whiteboard': { name: 'ÁôΩÊùø', danger: 'low', voice: 'ÂâçÊñπÊúâÁôΩÊùø' },
          'blackboard': { name: 'ÈªëÊùø', danger: 'low', voice: 'ÂâçÊñπÊúâÈªëÊùø' },
          'calendar': { name: 'Êó•ÊõÜ', danger: 'low', voice: 'ÂâçÊñπÊúâÊó•ÊõÜ' },
          'clock': { name: 'ÊôÇÈêò', danger: 'low', voice: 'ÂâçÊñπÊúâÊôÇÈêò' },
          'thermometer': { name: 'Ê∫´Â∫¶Ë®à', danger: 'low', voice: 'ÂâçÊñπÊúâÊ∫´Â∫¶Ë®à' },
          'barometer': { name: 'Ê∞£Â£ìË®à', danger: 'low', voice: 'ÂâçÊñπÊúâÊ∞£Â£ìË®à' },
          'hygrometer': { name: 'ÊøïÂ∫¶Ë®à', danger: 'low', voice: 'ÂâçÊñπÊúâÊøïÂ∫¶Ë®à' }
        },
        triggers: ['chair', 'bed', 'dining table', 'tv', 'laptop', 'vase', 'knife', 'scissors', 'step', 'stair', 'threshold', 'door', 'window']
      },
      kitchen: {
        name: 'ÂªöÊàøÁí∞Â¢É',
        objects: {
          'knife': { name: 'ÂàÄÂ≠ê', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂàÄÂ≠êÔºåÈãíÂà©Áâ©ÂìÅË´ãÂ∞èÂøÉ' },
          'cup': { name: 'ÊùØÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊùØÂ≠êÔºåË´ãÂ∞èÂøÉÊãøÂèñ' },
          'fork': { name: 'ÂèâÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÂèâÂ≠êÔºåË´ãÊ≥®ÊÑèÂ∞ñÈΩí' },
          'spoon': { name: 'ÊπØÂåô', danger: 'low', voice: 'ÂâçÊñπÊúâÊπØÂåô' },
          'bowl': { name: 'Á¢ó', danger: 'medium', voice: 'ÂâçÊñπÊúâÁ¢ó' },
          'oven': { name: 'ÁÉ§ÁÆ±', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÁÉ§ÁÆ±ÔºåÈ´òÊ∫´Ë®≠ÂÇôË´ãÂ∞èÂøÉ' },
          'microwave': { name: 'ÂæÆÊ≥¢Áàê', danger: 'high', voice: 'Ê≥®ÊÑèÔºÅÂâçÊñπÊúâÂæÆÊ≥¢Áàê' },
          'refrigerator': { name: 'ÂÜ∞ÁÆ±', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÜ∞ÁÆ±' },
          'sink': { name: 'Ê∞¥ÊßΩ', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ∞¥ÊßΩ' },
          'bottle': { name: 'Áì∂Â≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÁì∂Â≠ê' },
          'dining table': { name: 'È§êÊ°å', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ§êÊ°å' },
          'chair': { name: 'Ê§ÖÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ§ÖÂ≠ê' },
          'wine glass': { name: 'ÁéªÁíÉÊùØ', danger: 'high', voice: 'Ê≥®ÊÑèÔºÅÂâçÊñπÊúâÁéªÁíÉÊùØÔºåÊòìÁ¢éÁâ©ÂìÅ' },
          'toaster': { name: 'ÁÉ§È∫µÂåÖÊ©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÁÉ§È∫µÂåÖÊ©ü' },
          'kettle': { name: 'Ê∞¥Â£∫', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ∞¥Â£∫ÔºåÊ≥®ÊÑèÈ´òÊ∫´' },
          'cutting board': { name: 'Á†ßÊùø', danger: 'medium', voice: 'ÂâçÊñπÊúâÁ†ßÊùø' },
          'pan': { name: 'Âπ≥Â∫ïÈçã', danger: 'medium', voice: 'ÂâçÊñπÊúâÂπ≥Â∫ïÈçãÔºåÊ≥®ÊÑèÈ´òÊ∫´' },
          'pot': { name: 'ÈçãÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÈçãÂ≠êÔºåÊ≥®ÊÑèÈ´òÊ∫´' },
          'blender': { name: 'ÊûúÊ±ÅÊ©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÊûúÊ±ÅÊ©ü' },
          'coffee maker': { name: 'ÂíñÂï°Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂíñÂï°Ê©ü' },
          'dishwasher': { name: 'Ê¥óÁ¢óÊ©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ¥óÁ¢óÊ©ü' },
          'trash can': { name: 'ÂûÉÂúæÊ°∂', danger: 'low', voice: 'ÂâçÊñπÊúâÂûÉÂúæÊ°∂' },
          'cabinet': { name: 'Ê´•Ê´É', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ´•Ê´É' },
          'counter': { name: 'ÊµÅÁêÜÂè∞', danger: 'medium', voice: 'ÂâçÊñπÊúâÊµÅÁêÜÂè∞' },
          'stove': { name: 'Áì¶ÊñØÁàê', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÁì¶ÊñØÁàêÔºåÈ´òÊ∫´Ë®≠ÂÇô' },
          'plate': { name: 'Áõ§Â≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÁõ§Â≠êÔºåÊòìÁ¢éÁâ©ÂìÅ' },
          'mug': { name: 'È¶¨ÂÖãÊùØ', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ¶¨ÂÖãÊùØ' },
          'utensil holder': { name: 'È§êÂÖ∑Êû∂', danger: 'low', voice: 'ÂâçÊñπÊúâÈ§êÂÖ∑Êû∂' }
        },
        triggers: ['knife', 'oven', 'microwave', 'cup', 'bottle', 'wine glass', 'stove', 'pan']
      },
      bathroom: {
        name: 'Êµ¥ÂÆ§Áí∞Â¢É',
        objects: {
          'toilet': { name: 'È¶¨Ê°∂', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ¶¨Ê°∂' },
          'sink': { name: 'Ê¥óÊâãÂè∞', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ¥óÊâãÂè∞' },
          'bottle': { name: 'Ê¥óÈ´ÆÁ≤æ', danger: 'low', voice: 'ÂâçÊñπÊúâÊ¥óÈ´ÆÁ≤æ' },
          'toothbrush': { name: 'ÁâôÂà∑', danger: 'low', voice: 'ÂâçÊñπÊúâÁâôÂà∑' },
          'hair drier': { name: 'ÂêπÈ¢®Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂêπÈ¢®Ê©ü' },
          'cup': { name: 'ÊùØÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊùØÂ≠ê' },
          'towel': { name: 'ÊØõÂ∑æ', danger: 'low', voice: 'ÂâçÊñπÊúâÊØõÂ∑æ' },
          'soap': { name: 'ËÇ•ÁöÇ', danger: 'low', voice: 'ÂâçÊñπÊúâËÇ•ÁöÇ' },
          'mirror': { name: 'Èè°Â≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÈè°Â≠êÔºåË´ãÂ∞èÂøÉÁ¢∞Êíû' },
          'shower': { name: 'Ê∑ãÊµ¥Èñì', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ∑ãÊµ¥Èñì' },
          'bathtub': { name: 'Êµ¥Áº∏', danger: 'medium', voice: 'ÂâçÊñπÊúâÊµ¥Áº∏' },
          'toilet paper': { name: 'Ë°õÁîüÁ¥ô', danger: 'low', voice: 'ÂâçÊñπÊúâË°õÁîüÁ¥ô' },
          'razor': { name: 'ÂàÆÈ¨çÂàÄ', danger: 'medium', voice: 'ÂâçÊñπÊúâÂàÆÈ¨çÂàÄÔºåÈãíÂà©Áâ©ÂìÅ' },
          'scale': { name: 'È´îÈáçË®à', danger: 'low', voice: 'ÂâçÊñπÊúâÈ´îÈáçË®à' },
          'bath mat': { name: 'Êµ¥ÂÆ§Ë∏èÂ¢ä', danger: 'low', voice: 'ÂâçÊñπÊúâÊµ¥ÂÆ§Ë∏èÂ¢ä' },
          'shampoo': { name: 'Ê¥óÈ´ÆÁ≤æ', danger: 'low', voice: 'ÂâçÊñπÊúâÊ¥óÈ´ÆÁ≤æ' },
          'conditioner': { name: 'ÊΩ§È´Æ‰π≥', danger: 'low', voice: 'ÂâçÊñπÊúâÊΩ§È´Æ‰π≥' },
          'toothpaste': { name: 'ÁâôËÜè', danger: 'low', voice: 'ÂâçÊñπÊúâÁâôËÜè' },
          'faucet': { name: 'Ê∞¥ÈæçÈ†≠', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ∞¥ÈæçÈ†≠' },
          'tissue box': { name: 'Èù¢Á¥ôÁõí', danger: 'low', voice: 'ÂâçÊñπÊúâÈù¢Á¥ôÁõí' },
          'laundry basket': { name: 'Ê¥óË°£Á±É', danger: 'low', voice: 'ÂâçÊñπÊúâÊ¥óË°£Á±É' },
          'medicine cabinet': { name: 'ÈÜ´Ëó•Ê´É', danger: 'medium', voice: 'ÂâçÊñπÊúâÈÜ´Ëó•Ê´É' }
        },
        triggers: ['toilet', 'sink', 'bottle', 'mirror', 'shower', 'bathtub']
      },
      office: {
        name: 'Ëæ¶ÂÖ¨ÂÆ§Áí∞Â¢É',
        objects: {
          'chair': { name: 'Ëæ¶ÂÖ¨Ê§Ö', danger: 'medium', voice: 'ÂâçÊñπÊúâËæ¶ÂÖ¨Ê§Ö' },
          'desk': { name: 'Ëæ¶ÂÖ¨Ê°å', danger: 'medium', voice: 'ÂâçÊñπÊúâËæ¶ÂÖ¨Ê°å' },
          'laptop': { name: 'Á≠ÜË®òÂûãÈõªËÖ¶', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõªËÖ¶' },
          'mouse': { name: 'ÊªëÈº†', danger: 'low', voice: 'ÂâçÊñπÊúâÊªëÈº†' },
          'keyboard': { name: 'ÈçµÁõ§', danger: 'low', voice: 'ÂâçÊñπÊúâÈçµÁõ§' },
          'book': { name: 'Êõ∏Êú¨', danger: 'low', voice: 'ÂâçÊñπÊúâÊõ∏Êú¨' },
          'cell phone': { name: 'ÊâãÊ©ü', danger: 'low', voice: 'ÂâçÊñπÊúâÊâãÊ©ü' },
          'bottle': { name: 'Ê∞¥Áì∂', danger: 'low', voice: 'ÂâçÊñπÊúâÊ∞¥Áì∂' },
          'cup': { name: 'ÊùØÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊùØÂ≠ê' },
          'printer': { name: 'Âç∞Ë°®Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂç∞Ë°®Ê©ü' },
          'monitor': { name: 'È°ØÁ§∫Âô®', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ°ØÁ§∫Âô®' },
          'calculator': { name: 'Ë®àÁÆóÊ©ü', danger: 'low', voice: 'ÂâçÊñπÊúâË®àÁÆóÊ©ü' },
          'file cabinet': { name: 'Êñá‰ª∂Ê´É', danger: 'medium', voice: 'ÂâçÊñπÊúâÊñá‰ª∂Ê´É' },
          'whiteboard': { name: 'ÁôΩÊùø', danger: 'low', voice: 'ÂâçÊñπÊúâÁôΩÊùø' },
          'projector': { name: 'ÊäïÂΩ±Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÊäïÂΩ±Ê©ü' },
          'stapler': { name: 'Ë®ÇÊõ∏Ê©ü', danger: 'low', voice: 'ÂâçÊñπÊúâË®ÇÊõ∏Ê©ü' },
          'scissors': { name: 'Ââ™ÂàÄ', danger: 'medium', voice: 'ÂâçÊñπÊúâÂâ™ÂàÄÔºåÈãíÂà©Áâ©ÂìÅ' },
          'pen': { name: 'Á≠Ü', danger: 'low', voice: 'ÂâçÊñπÊúâÁ≠Ü' },
          'pencil': { name: 'ÈâõÁ≠Ü', danger: 'low', voice: 'ÂâçÊñπÊúâÈâõÁ≠Ü' },
          'notebook': { name: 'Á≠ÜË®òÊú¨', danger: 'low', voice: 'ÂâçÊñπÊúâÁ≠ÜË®òÊú¨' },
          'folder': { name: 'Êñá‰ª∂Â§æ', danger: 'low', voice: 'ÂâçÊñπÊúâÊñá‰ª∂Â§æ' },
          'briefcase': { name: 'ÂÖ¨‰∫ãÂåÖ', danger: 'low', voice: 'ÂâçÊñπÊúâÂÖ¨‰∫ãÂåÖ' },
          'coffee machine': { name: 'ÂíñÂï°Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂíñÂï°Ê©ü' },
          'water cooler': { name: 'È£≤Ê∞¥Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ£≤Ê∞¥Ê©ü' },
          'photocopier': { name: 'ÂΩ±Âç∞Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂΩ±Âç∞Ê©ü' },
          'telephone': { name: 'ÈõªË©±', danger: 'low', voice: 'ÂâçÊñπÊúâÈõªË©±' },
          'headphones': { name: 'ËÄ≥Ê©ü', danger: 'low', voice: 'ÂâçÊñπÊúâËÄ≥Ê©ü' }
        },
        triggers: ['chair', 'desk', 'laptop', 'printer', 'file cabinet', 'projector']
      },
      bedroom: {
        name: 'Ëá•ÂÆ§Áí∞Â¢É',
        objects: {
          'bed': { name: 'Â∫ä', danger: 'medium', voice: 'ÂâçÊñπÊúâÂ∫ä' },
          'chair': { name: 'Ê§ÖÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ§ÖÂ≠ê' },
          'clock': { name: 'ÊôÇÈêò', danger: 'low', voice: 'ÂâçÊñπÊúâÊôÇÈêò' },
          'vase': { name: 'Ëä±Áì∂', danger: 'medium', voice: 'ÂâçÊñπÊúâËä±Áì∂ÔºåÊòìÁ¢éÁâ©ÂìÅ' },
          'lamp': { name: 'Ê™ØÁáà', danger: 'low', voice: 'ÂâçÊñπÊúâÊ™ØÁáà' },
          'mirror': { name: 'Èè°Â≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÈè°Â≠êÔºåË´ãÂ∞èÂøÉÁ¢∞Êíû' },
          'dresser': { name: 'Ê¢≥Â¶ùÂè∞', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ¢≥Â¶ùÂè∞' },
          'curtain': { name: 'Á™óÁ∞æ', danger: 'low', voice: 'ÂâçÊñπÊúâÁ™óÁ∞æ' },
          'teddy bear': { name: 'Áé©ÂÖ∑ÁÜä', danger: 'low', voice: 'ÂâçÊñπÊúâÁé©ÂÖ∑ÁÜä' },
          'pillow': { name: 'ÊûïÈ†≠', danger: 'low', voice: 'ÂâçÊñπÊúâÊûïÈ†≠' },
          'blanket': { name: 'ÊØØÂ≠ê', danger: 'low', voice: 'ÂâçÊñπÊúâÊØØÂ≠ê' },
          'wardrobe': { name: 'Ë°£Ê´É', danger: 'medium', voice: 'ÂâçÊñπÊúâË°£Ê´É' },
          'nightstand': { name: 'Â∫äÈ†≠Ê´É', danger: 'medium', voice: 'ÂâçÊñπÊúâÂ∫äÈ†≠Ê´É' },
          'alarm clock': { name: 'È¨ßÈêò', danger: 'low', voice: 'ÂâçÊñπÊúâÈ¨ßÈêò' },
          'bookshelf': { name: 'Êõ∏Êû∂', danger: 'medium', voice: 'ÂâçÊñπÊúâÊõ∏Êû∂' },
          'picture frame': { name: 'Áõ∏Ê°Ü', danger: 'low', voice: 'ÂâçÊñπÊúâÁõ∏Ê°Ü' },
          'rug': { name: 'Âú∞ÊØØ', danger: 'low', voice: 'ÂâçÊñπÊúâÂú∞ÊØØ' },
          'fan': { name: 'ÈõªÈ¢®Êâá', danger: 'medium', voice: 'ÂâçÊñπÊúâÈõªÈ¢®Êâá' },
          'air conditioner': { name: 'ÂÜ∑Ê∞£Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÜ∑Ê∞£Ê©ü' }
        },
        triggers: ['bed', 'mirror', 'dresser', 'lamp', 'wardrobe', 'nightstand']
      },
      supermarket: {
        name: 'Ë∂ÖÂ∏ÇÁí∞Â¢É',
        objects: {
          'shopping cart': { name: 'Ë≥ºÁâ©Ëªä', danger: 'medium', voice: 'ÂâçÊñπÊúâË≥ºÁâ©Ëªä' },
          'bottle': { name: 'È£≤ÊñôÁì∂', danger: 'low', voice: 'ÂâçÊñπÊúâÈ£≤ÊñôÁì∂' },
          'apple': { name: 'ËòãÊûú', danger: 'low', voice: 'ÂâçÊñπÊúâËòãÊûú' },
          'banana': { name: 'È¶ôËïâ', danger: 'low', voice: 'ÂâçÊñπÊúâÈ¶ôËïâ' },
          'person': { name: 'È°ßÂÆ¢', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ°ßÂÆ¢' },
          'chair': { name: '‰ºëÊÅØÊ§Ö', danger: 'medium', voice: 'ÂâçÊñπÊúâ‰ºëÊÅØÊ§Ö' },
          'refrigerator': { name: 'ÂÜ∑ËóèÊ´É', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÜ∑ËóèÊ´É' },
          'shelf': { name: 'Ë≤®Êû∂', danger: 'medium', voice: 'ÂâçÊñπÊúâË≤®Êû∂' },
          'cash register': { name: 'Êî∂ÈäÄÊ©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÊî∂ÈäÄÊ©ü' },
          'shopping basket': { name: 'Ë≥ºÁâ©Á±É', danger: 'low', voice: 'ÂâçÊñπÊúâË≥ºÁâ©Á±É' },
          'orange': { name: 'Ê©òÂ≠ê', danger: 'low', voice: 'ÂâçÊñπÊúâÊ©òÂ≠ê' },
          'broccoli': { name: 'Ëä±Ê§∞Ëèú', danger: 'low', voice: 'ÂâçÊñπÊúâËä±Ê§∞Ëèú' },
          'carrot': { name: 'Á¥ÖËòøËîî', danger: 'low', voice: 'ÂâçÊñπÊúâÁ¥ÖËòøËîî' },
          'pizza': { name: 'Êä´Ëñ©', danger: 'low', voice: 'ÂâçÊñπÊúâÊä´Ëñ©' },
          'cake': { name: 'ËõãÁ≥ï', danger: 'low', voice: 'ÂâçÊñπÊúâËõãÁ≥ï' },
          'donut': { name: 'ÁîúÁîúÂúà', danger: 'low', voice: 'ÂâçÊñπÊúâÁîúÁîúÂúà' },
          'sandwich': { name: '‰∏âÊòéÊ≤ª', danger: 'low', voice: 'ÂâçÊñπÊúâ‰∏âÊòéÊ≤ª' },
          'hot dog': { name: 'ÁÜ±Áãó', danger: 'low', voice: 'ÂâçÊñπÊúâÁÜ±Áãó' },
          'freezer': { name: 'ÂÜ∑ÂáçÊ´É', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÜ∑ÂáçÊ´É' },
          'display case': { name: 'Â±ïÁ§∫Ê´É', danger: 'medium', voice: 'ÂâçÊñπÊúâÂ±ïÁ§∫Ê´É' },
          'shopping bag': { name: 'Ë≥ºÁâ©Ë¢ã', danger: 'low', voice: 'ÂâçÊñπÊúâË≥ºÁâ©Ë¢ã' },
          'price tag': { name: 'ÂÉπÊ†ºÊ®ôÁ±§', danger: 'low', voice: 'ÂâçÊñπÊúâÂÉπÊ†ºÊ®ôÁ±§' },
          'shopping cart corral': { name: 'Ë≥ºÁâ©ËªäÂÅúÊîæÂçÄ', danger: 'medium', voice: 'ÂâçÊñπÊúâË≥ºÁâ©ËªäÂÅúÊîæÂçÄ' },
          'produce scale': { name: 'Ëî¨ÊûúÁß§', danger: 'low', voice: 'ÂâçÊñπÊúâËî¨ÊûúÁß§' },
          'shopping list': { name: 'Ë≥ºÁâ©Ê∏ÖÂñÆ', danger: 'low', voice: 'ÂâçÊñπÊúâË≥ºÁâ©Ê∏ÖÂñÆ' }
        },
        triggers: ['shopping cart', 'person', 'shelf', 'refrigerator', 'cash register', 'freezer']
      },
      hospital: {
        name: 'ÈÜ´Èô¢Áí∞Â¢É',
        objects: {
          'person': { name: 'ÈÜ´Ë≠∑‰∫∫Âì°', danger: 'medium', voice: 'ÂâçÊñπÊúâÈÜ´Ë≠∑‰∫∫Âì°' },
          'bed': { name: 'ÁóÖÂ∫ä', danger: 'medium', voice: 'ÂâçÊñπÊúâÁóÖÂ∫ä' },
          'chair': { name: 'ÂÄôË®∫Ê§Ö', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÄôË®∫Ê§Ö' },
          'wheelchair': { name: 'Ëº™Ê§Ö', danger: 'medium', voice: 'ÂâçÊñπÊúâËº™Ê§Ö' },
          'crutches': { name: 'ÊãêÊùñ', danger: 'medium', voice: 'ÂâçÊñπÊúâÊãêÊùñ' },
          'medical equipment': { name: 'ÈÜ´ÁôÇË®≠ÂÇô', danger: 'high', voice: 'Ê≥®ÊÑèÔºÅÂâçÊñπÊúâÈÜ´ÁôÇË®≠ÂÇô' },
          'scale': { name: 'È´îÈáçË®à', danger: 'low', voice: 'ÂâçÊñπÊúâÈ´îÈáçË®à' },
          'stretcher': { name: 'ÊìîÊû∂', danger: 'medium', voice: 'ÂâçÊñπÊúâÊìîÊû∂' },
          'iv pole': { name: 'ÈªûÊª¥Êû∂', danger: 'medium', voice: 'ÂâçÊñπÊúâÈªûÊª¥Êû∂' },
          'hospital bed': { name: 'ÁóÖÂ∫ä', danger: 'medium', voice: 'ÂâçÊñπÊúâÁóÖÂ∫ä' },
          'exam table': { name: 'Ê™¢Êü•Âè∞', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ™¢Êü•Âè∞' },
          'x-ray machine': { name: 'XÂÖâÊ©ü', danger: 'high', voice: 'Ê≥®ÊÑèÔºÅÂâçÊñπÊúâXÂÖâÊ©ü' },
          'ultrasound machine': { name: 'Ë∂ÖÈü≥Ê≥¢Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâË∂ÖÈü≥Ê≥¢Ê©ü' },
          'defibrillator': { name: 'ÈõªÊìäÂô®', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÈõªÊìäÂô®' },
          'surgical table': { name: 'ÊâãË°ìÂè∞', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÊâãË°ìÂè∞' },
          'anesthesia machine': { name: 'È∫ªÈÜâÊ©ü', danger: 'high', voice: 'Ê≥®ÊÑèÔºÅÂâçÊñπÊúâÈ∫ªÈÜâÊ©ü' },
          'medical cart': { name: 'ÈÜ´ÁôÇÊé®Ëªä', danger: 'medium', voice: 'ÂâçÊñπÊúâÈÜ´ÁôÇÊé®Ëªä' },
          'medicine cabinet': { name: 'Ëó•Ê´É', danger: 'medium', voice: 'ÂâçÊñπÊúâËó•Ê´É' },
          'first aid kit': { name: 'ÊÄ•ÊïëÁÆ±', danger: 'low', voice: 'ÂâçÊñπÊúâÊÄ•ÊïëÁÆ±' },
          'thermometer': { name: 'È´îÊ∫´Ë®à', danger: 'low', voice: 'ÂâçÊñπÊúâÈ´îÊ∫´Ë®à' },
          'blood pressure monitor': { name: 'Ë°ÄÂ£ìË®à', danger: 'low', voice: 'ÂâçÊñπÊúâË°ÄÂ£ìË®à' },
          'oxygen tank': { name: 'Ê∞ßÊ∞£Áì∂', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÊ∞ßÊ∞£Áì∂' },
          'wheelchair ramp': { name: 'Ëº™Ê§ÖÂù°ÈÅì', danger: 'medium', voice: 'ÂâçÊñπÊúâËº™Ê§ÖÂù°ÈÅì' },
          'hospital gown': { name: 'ÁóÖÊÇ£Êúç', danger: 'low', voice: 'ÂâçÊñπÊúâÁóÖÊÇ£Êúç' },
          'medical chart': { name: 'ÁóÖÊ≠∑Ë°®', danger: 'low', voice: 'ÂâçÊñπÊúâÁóÖÊ≠∑Ë°®' },
          'waiting room chair': { name: 'ÂÄôË®∫Ê§Ö', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÄôË®∫Ê§Ö' },
          'reception desk': { name: 'ÊéõËôüÊ´ÉÂè∞', danger: 'medium', voice: 'ÂâçÊñπÊúâÊéõËôüÊ´ÉÂè∞' },
          'hospital sign': { name: 'ÈÜ´Èô¢Ê®ôÁ§∫', danger: 'low', voice: 'ÂâçÊñπÊúâÈÜ´Èô¢Ê®ôÁ§∫' }
        },
        triggers: ['person', 'bed', 'wheelchair', 'medical equipment', 'stretcher', 'x-ray machine', 'defibrillator']
      },
      restaurant: {
        name: 'È§êÂª≥Áí∞Â¢É',
        objects: {
          'dining table': { name: 'È§êÊ°å', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ§êÊ°å' },
          'chair': { name: 'È§êÊ§Ö', danger: 'medium', voice: 'ÂâçÊñπÊúâÈ§êÊ§Ö' },
          'cup': { name: 'ÊùØÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÊùØÂ≠ê' },
          'fork': { name: 'ÂèâÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÂèâÂ≠ê' },
          'knife': { name: 'ÂàÄÂ≠ê', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÂàÄÂ≠ê' },
          'spoon': { name: 'ÊπØÂåô', danger: 'low', voice: 'ÂâçÊñπÊúâÊπØÂåô' },
          'plate': { name: 'Áõ§Â≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÁõ§Â≠ê' },
          'person': { name: 'ÊúçÂãôÂì°', danger: 'medium', voice: 'ÂâçÊñπÊúâÊúçÂãôÂì°' },
          'menu': { name: 'ËèúÂñÆ', danger: 'low', voice: 'ÂâçÊñπÊúâËèúÂñÆ' },
          'napkin': { name: 'È§êÂ∑æÁ¥ô', danger: 'low', voice: 'ÂâçÊñπÊúâÈ§êÂ∑æÁ¥ô' },
          'salt shaker': { name: 'ÈπΩÁΩê', danger: 'low', voice: 'ÂâçÊñπÊúâÈπΩÁΩê' },
          'pepper shaker': { name: 'ËÉ°Ê§íÁΩê', danger: 'low', voice: 'ÂâçÊñπÊúâËÉ°Ê§íÁΩê' },
          'wine glass': { name: 'ÈÖíÊùØ', danger: 'high', voice: 'Ê≥®ÊÑèÔºÅÂâçÊñπÊúâÈÖíÊùØÔºåÊòìÁ¢éÁâ©ÂìÅ' },
          'bowl': { name: 'Á¢ó', danger: 'medium', voice: 'ÂâçÊñπÊúâÁ¢ó' },
          'serving tray': { name: 'ÊâòÁõ§', danger: 'medium', voice: 'ÂâçÊñπÊúâÊâòÁõ§' },
          'coffee maker': { name: 'ÂíñÂï°Ê©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÂíñÂï°Ê©ü' },
          'toaster': { name: 'ÁÉ§È∫µÂåÖÊ©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÁÉ§È∫µÂåÖÊ©ü' },
          'microwave': { name: 'ÂæÆÊ≥¢Áàê', danger: 'high', voice: 'Ê≥®ÊÑèÔºÅÂâçÊñπÊúâÂæÆÊ≥¢Áàê' },
          'refrigerator': { name: 'ÂÜ∞ÁÆ±', danger: 'medium', voice: 'ÂâçÊñπÊúâÂÜ∞ÁÆ±' },
          'oven': { name: 'ÁÉ§ÁÆ±', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÁÉ§ÁÆ±ÔºåÈ´òÊ∫´Ë®≠ÂÇô' },
          'stove': { name: 'ÁàêÁÅ∂', danger: 'high', voice: 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÁàêÁÅ∂ÔºåÈ´òÊ∫´Ë®≠ÂÇô' },
          'sink': { name: 'Ê∞¥ÊßΩ', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ∞¥ÊßΩ' },
          'trash can': { name: 'ÂûÉÂúæÊ°∂', danger: 'low', voice: 'ÂâçÊñπÊúâÂûÉÂúæÊ°∂' },
          'cash register': { name: 'Êî∂ÈäÄÊ©ü', danger: 'medium', voice: 'ÂâçÊñπÊúâÊî∂ÈäÄÊ©ü' },
          'waiting area chair': { name: 'Á≠âÂÄôÂçÄÊ§ÖÂ≠ê', danger: 'medium', voice: 'ÂâçÊñπÊúâÁ≠âÂÄôÂçÄÊ§ÖÂ≠ê' },
          'restroom sign': { name: 'Ê¥óÊâãÈñìÊ®ôÁ§∫', danger: 'low', voice: 'ÂâçÊñπÊúâÊ¥óÊâãÈñìÊ®ôÁ§∫' },
          'exit sign': { name: 'Âá∫Âè£Ê®ôÁ§∫', danger: 'low', voice: 'ÂâçÊñπÊúâÂá∫Âè£Ê®ôÁ§∫' },
          'kitchen door': { name: 'ÂªöÊàøÈñÄ', danger: 'medium', voice: 'ÂâçÊñπÊúâÂªöÊàøÈñÄ' },
          'buffet table': { name: 'Ëá™Âä©È§êÂè∞', danger: 'medium', voice: 'ÂâçÊñπÊúâËá™Âä©È§êÂè∞' },
          'salad bar': { name: 'Ê≤ôÊãâÂêß', danger: 'medium', voice: 'ÂâçÊñπÊúâÊ≤ôÊãâÂêß' }
        },
        triggers: ['dining table', 'chair', 'knife', 'person', 'oven', 'stove', 'microwave']
      }
    };

    // Êì¥Â±ï COCO-SSD È°ûÂà•Êò†Â∞ÑÔºàÂ∞áÁõ∏‰ººÁâ©È´îÊò†Â∞ÑÂà∞Â∑≤Áü•È°ûÂà•Ôºâ
    const classMapping = {
      'teddy bear': 'toy',
      'sports ball': 'ball',
      'kite': 'toy',
      'baseball bat': 'sports',
      'skateboard': 'sports',
      'surfboard': 'sports',
      'tennis racket': 'sports',
      'wine glass': 'cup',
      'hot dog': 'food',
      'pizza': 'food',
      'donut': 'food',
      'cake': 'food',
      'banana': 'food',
      'apple': 'food',
      'sandwich': 'food',
      'orange': 'food',
      'broccoli': 'food',
      'carrot': 'food'
    };

    /**********************
     * 3) GPSÂ∞éËà™Á≥ªÁµ±
     **********************/
    class GPSNavigator {
      constructor() {
        this.homePosition = null;
        this.currentPosition = null;
        this.isTracking = false;
        this.watchId = null;
        this.returnHomeInterval = null;
        this.loadHomePosition();
      }

      loadHomePosition() {
        const saved = localStorage.getItem('homePosition');
        if (saved) {
          this.homePosition = JSON.parse(saved);
          updateGPSStatus('Â∞±Á∑í');
          document.getElementById('btnSetHome').classList.add('gps-active');
        }
      }

      setHomePosition() {
        if (!navigator.geolocation) {
          updateVoice('ÊÇ®ÁöÑË£ùÁΩÆ‰∏çÊîØÊè¥GPSÂÆö‰Ωç');
          return;
        }

        updateVoice('Ê≠£Âú®Áç≤ÂèñÁï∂Ââç‰ΩçÁΩÆ...');
        navigator.geolocation.getCurrentPosition(
          (position) => {
            this.homePosition = {
              lat: position.coords.latitude,
              lng: position.coords.longitude,
              timestamp: new Date().toISOString()
            };
            localStorage.setItem('homePosition', JSON.stringify(this.homePosition));
            updateVoice(`ÂÆ∂ÁöÑ‰ΩçÁΩÆÂ∑≤Ë®òÈåÑÔºÅ`);
            updateGPSStatus('Â∑≤Ë®≠ÂÆöÂÆ∂');
            document.getElementById('btnSetHome').classList.add('gps-active');
          },
          (error) => {
            let errorMsg = 'ÁÑ°Ê≥ïÁç≤Âèñ‰ΩçÁΩÆÔºö';
            switch(error.code) {
              case error.PERMISSION_DENIED:
                errorMsg += 'Ë´ãÂÖÅË®±‰ΩçÁΩÆÊ¨äÈôê';
                break;
              case error.POSITION_UNAVAILABLE:
                errorMsg += '‰ΩçÁΩÆË≥áË®ä‰∏çÂèØÁî®';
                break;
              case error.TIMEOUT:
                errorMsg += 'ÂÆö‰ΩçË´ãÊ±ÇË∂ÖÊôÇ';
                break;
              default:
                errorMsg += 'Êú™Áü•ÈåØË™§';
            }
            updateVoice(errorMsg);
          },
          {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 60000
          }
        );
      }

      startReturnHome() {
        if (!this.homePosition) {
          updateVoice('Ë´ãÂÖàË®≠ÂÆöÂÆ∂ÁöÑ‰ΩçÁΩÆ');
          return;
        }

        // ÂàáÊèõËøîËà™Ê®°Âºè
        if (this.isTracking) {
          this.stopReturnHome();
          updateVoice('ËøîËà™Â∞éËà™Â∑≤ÂèñÊ∂à');
          return;
        }

        this.isTracking = true;
        updateVoice('ÈñãÂßãÂÆâÂÖ®ÈÄöÈÅìËøîËà™Â∞éËà™ÔºåÁ≥ªÁµ±Â∞áÂºïÂ∞éÊÇ®Ëµ∞ÂÆâÂÖ®Ë∑ØÁ∑ö');
        updateGPSStatus('ÂÆâÂÖ®ËøîËà™‰∏≠');
        document.getElementById('btnReturnHome').classList.add('gps-active');
        document.getElementById('btnReturnHome').textContent = 'ÂèñÊ∂àËøîËà™';

        this.watchId = navigator.geolocation.watchPosition(
          (position) => {
            this.currentPosition = {
              lat: position.coords.latitude,
              lng: position.coords.longitude,
              accuracy: position.coords.accuracy
            };
            this.updateNavigation();
          },
          (error) => {
            updateVoice('GPS‰ø°Ëôü‰∏çÁ©©ÂÆö');
          },
          {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 3000
          }
        );

        this.returnHomeInterval = setInterval(() => {
          if (this.currentPosition) {
            this.updateNavigation();
          }
        }, 10000);
      }

      updateNavigation() {
        const navInfo = this.calculateNavigation();
        if (!navInfo) return;

        const { distance, direction } = navInfo;
        document.getElementById('homeDistance').textContent = `${distance}m`;

        // Â∞áÊù±ÂçóË•øÂåóËΩâÊèõÁÇ∫Â∑¶ËΩâÂè≥ËΩâÊåá‰ª§
        let turnInstruction = '';
        if (direction.includes('Âåó')) {
          turnInstruction = 'Áõ¥Ë°å';
        } else if (direction.includes('Êù±')) {
          turnInstruction = 'Âè≥ËΩâ';
        } else if (direction.includes('Ë•ø')) {
          turnInstruction = 'Â∑¶ËΩâ';
        } else if (direction.includes('Âçó')) {
          turnInstruction = 'Ëø¥ËΩâ';
        } else {
          turnInstruction = 'ÂâçÈÄ≤';
        }

        // ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™ÈÇèËºØ
        if (distance < 20) {
          updateVoice(`Â∑≤Âà∞ÈÅîÂÆ∂ÈôÑËøëÔºåË∑ùÈõ¢${Math.round(distance)}ÂÖ¨Â∞∫ÔºåÂÆâÂÖ®Âà∞ÈÅî`);
          this.stopReturnHome();
        } else if (distance < 50) {
          updateVoice(`Âç≥Â∞áÂà∞ÂÆ∂ÔºåË∑ùÈõ¢${Math.round(distance)}ÂÖ¨Â∞∫ÔºåË´ã${turnInstruction}Ê≤øÂÆâÂÖ®ÈÄöÈÅìÂâçÈÄ≤`);
        } else if (distance < 200) {
          updateVoice(`Ë∑ùÂÆ∂${Math.round(distance)}ÂÖ¨Â∞∫ÔºåÂÆâÂÖ®ÈÄöÈÅìÊö¢ÈÄöÔºåË´ã${turnInstruction}ÂâçÈÄ≤`);
        } else {
          updateVoice(`Ë∑ùÂÆ∂${Math.round(distance)}ÂÖ¨Â∞∫ÔºåÁ≥ªÁµ±Ê≠£Âú®ÁÇ∫ÊÇ®Ë¶èÂäÉÂÆâÂÖ®Ë∑ØÁ∑öÔºåË´ã${turnInstruction}ÂâçÈÄ≤`);
        }
      }

      calculateNavigation() {
        if (!this.currentPosition || !this.homePosition) return null;

        const R = 6371000;
        const œÜ1 = this.currentPosition.lat * Math.PI/180;
        const œÜ2 = this.homePosition.lat * Math.PI/180;
        const ŒîœÜ = (this.homePosition.lat - this.currentPosition.lat) * Math.PI/180;
        const ŒîŒª = (this.homePosition.lng - this.currentPosition.lng) * Math.PI/180;

        const a = Math.sin(ŒîœÜ/2) * Math.sin(ŒîœÜ/2) +
                  Math.cos(œÜ1) * Math.cos(œÜ2) *
                  Math.sin(ŒîŒª/2) * Math.sin(ŒîŒª/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        const distance = Math.round(R * c);

        const y = Math.sin(ŒîŒª) * Math.cos(œÜ2);
        const x = Math.cos(œÜ1) * Math.sin(œÜ2) -
                  Math.sin(œÜ1) * Math.cos(œÜ2) * Math.cos(ŒîŒª);
        const Œ∏ = Math.atan2(y, x);
        const bearing = (Œ∏ * 180/Math.PI + 360) % 360;

        const direction = this.getDirectionFromBearing(bearing);
        return { distance, direction };
      }

      getDirectionFromBearing(bearing) {
        // ÊîπÁÇ∫Êõ¥Áõ¥ËßÄÁöÑÊñπÂêëÊèèËø∞ÔºåÈÅ©ÂêàÁõ≤‰∫∫‰ΩøÁî®
        const directions = ['Ê≠£ÂâçÊñπ', 'Âè≥ÂâçÊñπ', 'Âè≥ÂÅ¥', 'Âè≥ÂæåÊñπ', 'Ê≠£ÂæåÊñπ', 'Â∑¶ÂæåÊñπ', 'Â∑¶ÂÅ¥', 'Â∑¶ÂâçÊñπ'];
        const index = Math.round(bearing / 45) % 8;
        return directions[index];
      }

      stopReturnHome() {
        if (this.watchId) {
          navigator.geolocation.clearWatch(this.watchId);
          this.watchId = null;
        }
        if (this.returnHomeInterval) {
          clearInterval(this.returnHomeInterval);
          this.returnHomeInterval = null;
        }
        this.isTracking = false;
        updateGPSStatus('Â∞±Á∑í');
        document.getElementById('btnReturnHome').classList.remove('gps-active');
        document.getElementById('btnReturnHome').textContent = '‰∏ÄÈçµËøîËà™';
      }
    }

    /**********************
     * 4) Âú∞Èù¢ÈöúÁ§ôÁâ©Ê™¢Ê∏¨Á≥ªÁµ±ÔºàÂåÖÂê´Âú∞Èù¢Á∑öÊ¢ùÊ™¢Ê∏¨Ôºâ
     **********************/
    class GroundObstacleDetector {
      constructor() {
        this.groundObstacles = [];
        this.heightDifferenceThreshold = 0.1; // È´òÂ∫¶Â∑ÆÈñæÂÄºÔºàÂÖ¨Â∞∫Ôºâ
        this.lastGroundScan = 0;
        this.groundScanInterval = 2000; // ÊØè2ÁßíÊéÉÊèè‰∏ÄÊ¨°Âú∞Èù¢
        this.lineDetector = new LineDetector();
      }

      // Ê™¢Ê∏¨Âú∞Èù¢ÈöúÁ§ôÁâ©ÂíåÈ´òÂ∫¶Â∑Æ
      detectGroundObstacles(predictions, frameWidth, frameHeight) {
        const currentTime = Date.now();
        if (currentTime - this.lastGroundScan < this.groundScanInterval) {
          return this.groundObstacles;
        }

        this.lastGroundScan = currentTime;
        this.groundObstacles = [];

        // ÂàÜÊûêÈ†êÊ∏¨ÁµêÊûúÔºåË≠òÂà•Âú∞Èù¢Áõ∏ÈóúÁâ©È´î
        predictions.forEach(pred => {
          if (pred.score < SCORE_THRESHOLD) return;

          // Ê™¢Êü•ÊòØÂê¶ÁÇ∫Âú∞Èù¢ÈöúÁ§ôÁâ©
          const groundObstacle = this.identifyGroundObstacle(pred, frameWidth, frameHeight);
          if (groundObstacle) {
            this.groundObstacles.push(groundObstacle);
          }
        });

        // Ê∑ªÂä†ËôõÊì¨Âú∞Èù¢ÈöúÁ§ôÁâ©Ê™¢Ê∏¨ÔºàÂü∫ÊñºÂúñÂÉèÂàÜÊûêÔºâ
        this.addVirtualGroundObstacles(frameWidth, frameHeight);
        
        // Ê™¢Ê∏¨Âú∞Èù¢Á∑öÊ¢ùÔºà‰ΩøÁî®È†êÊ∏¨ÁµêÊûú‰æÜÊé®Êñ∑Á∑öÊ¢ùÔºâ
        const detectedLines = this.lineDetector.detectLines(frameWidth, frameHeight, predictions);
        this.groundObstacles.push(...detectedLines);

        return this.groundObstacles;
      }

      // Ë≠òÂà•Âú∞Èù¢ÈöúÁ§ôÁâ©
      identifyGroundObstacle(pred, frameWidth, frameHeight) {
        const [x, y, w, h] = pred.bbox;
        const centerY = y + h / 2;
        const bottomY = y + h;
        
        // Â¶ÇÊûúÁâ©È´îÂ∫ïÈÉ®Êé•ËøëÁï´Èù¢Â∫ïÈÉ®ÔºåÂèØËÉΩÊòØÂú∞Èù¢ÈöúÁ§ôÁâ©
        const isNearGround = bottomY > frameHeight * 0.7;
        
        if (isNearGround) {
          let obstacleType = 'unknown';
          let dangerLevel = 'medium';
          let voiceMessage = '';

          // Ê†πÊìöÁâ©È´îÈ°ûÂûãÂíå‰ΩçÁΩÆÂà§Êñ∑ÈöúÁ§ôÁâ©È°ûÂûã
          switch(pred.class) {
            case 'step':
            case 'stair':
              obstacleType = 'height_difference';
              dangerLevel = 'high';
              voiceMessage = 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâÈ´òÂ∫¶ËÆäÂåñÔºåË´ãÂ∞èÂøÉ‰∏ä‰∏ã';
              break;
            case 'curb':
            case 'threshold':
              obstacleType = 'height_difference';
              dangerLevel = 'medium';
              voiceMessage = 'ÂâçÊñπÊúâË∑ØÁ∑£Áü≥/ÈñÄÊ™ªÔºåË´ãÊä¨ËÖ≥';
              break;
            case 'pothole':
            case 'crack':
              obstacleType = 'surface_irregularity';
              dangerLevel = 'high';
              voiceMessage = 'Ë≠¶ÂëäÔºÅÂâçÊñπÊúâË∑ØÈù¢‰∏çÂπ≥ÔºåË´ãÁπûË°å';
              break;
            case 'rug':
            case 'cable':
              obstacleType = 'trip_hazard';
              dangerLevel = 'medium';
              voiceMessage = 'ÂâçÊñπÊúâÁµÜÂÄíÈ¢®Èö™ÔºåË´ãÂ∞èÂøÉ';
              break;
            default:
              // Â∞çÊñºÂÖ∂‰ªñÁâ©È´îÔºåÂ¶ÇÊûúÈù†ËøëÂú∞Èù¢‰∏îÂØ¨Â∫¶ËºÉÂ∞èÔºåÂèØËÉΩÊòØÁµÜÂÄíÈ¢®Èö™
              if (w < frameWidth * 0.1 && h < frameHeight * 0.1) {
                obstacleType = 'small_obstacle';
                dangerLevel = 'medium';
                voiceMessage = 'ÂâçÊñπÊúâÂ∞èÈöúÁ§ôÁâ©ÔºåË´ãÂ∞èÂøÉ';
              }
          }

          if (obstacleType !== 'unknown') {
            return {
              type: obstacleType,
              class: pred.class,
              bbox: pred.bbox,
              danger: dangerLevel,
              voice: voiceMessage,
              distance: estimateDistance(w, h, pred.class),
              position: { x: x + w/2, y: bottomY }
            };
          }
        }

        return null;
      }

      // Ê∑ªÂä†ËôõÊì¨Âú∞Èù¢ÈöúÁ§ôÁâ©ÔºàÂü∫ÊñºÂúñÂÉèÁâπÂæµÂàÜÊûêÔºâ
      addVirtualGroundObstacles(frameWidth, frameHeight) {
        // ÈÄôË£°ÂèØ‰ª•Êì¥Â±ïÁÇ∫‰ΩøÁî®ÂúñÂÉèËôïÁêÜÁÆóÊ≥ïÊ™¢Ê∏¨Âú∞Èù¢ÁâπÂæµ
        // ‰æãÂ¶ÇÔºöÈÇäÁ∑£Ê™¢Ê∏¨„ÄÅÁ¥ãÁêÜÂàÜÊûêÁ≠â
        
        // Êö´ÊôÇÊ∑ªÂä†‰∏Ä‰∫õÂü∫Êñº‰ΩçÁΩÆÁöÑËôõÊì¨Ê™¢Ê∏¨
        const virtualObstacles = [
          // ÂèØ‰ª•Ê†πÊìöÂØ¶ÈöõÈúÄÊ±ÇÊ∑ªÂä†Êõ¥Â§öËôõÊì¨Ê™¢Ê∏¨
        ];

        this.groundObstacles.push(...virtualObstacles);
      }

      // Áç≤ÂèñÊúÄËøëÁöÑÂú∞Èù¢ÈöúÁ§ôÁâ©
      getClosestGroundObstacle() {
        if (this.groundObstacles.length === 0) return null;
        
        return this.groundObstacles.reduce((closest, obstacle) => {
          return obstacle.distance < closest.distance ? obstacle : closest;
        });
      }
    }

    /**********************
     * 4.1) Âú∞Èù¢Á∑öÊ¢ùÊ™¢Ê∏¨Âô®ÔºàÂ¢ûÂº∑ÁâàÔºâ
     **********************/
    class LineDetector {
      constructor() {
        this.lineTypes = {
          'sidewalk_line': '‰∫∫Ë°åÈÅìÈÇäÁ∑£Á∑ö',
          'road_line': 'ÈÅìË∑ØÊ®ôÁ∑ö',
          'crosswalk_line': 'ÊñëÈ¶¨Á∑ö',
          'curb': 'Ë∑ØÁ∑£Áü≥',
          'door_threshold': 'ÈñÄÊ™ª',
          'floor_edge': 'Âú∞ÊùøÈÇäÁ∑£',
          'pavement_edge': 'Ë∑ØÈù¢ÈÇäÁ∑£',
          'guide_line': 'Â∞éÁõ≤Á∑ö',
          'tactile_paving': 'Â∞éÁõ≤Á£ö'
        };
        this.lastLineDetection = 0;
        this.lineDetectionCooldown = 2000; // 2ÁßíÊ™¢Ê∏¨ÈñìÈöî
      }

      detectLines(frameWidth, frameHeight, predictions = []) {
        const now = Date.now();
        if (now - this.lastLineDetection < this.lineDetectionCooldown) {
          return [];
        }
        
        this.lastLineDetection = now;
        const lines = [];
        
        // Âü∫ÊñºÁâ©È´î‰ΩçÁΩÆÊé®Êñ∑Âú∞Èù¢Á∑öÊ¢ù
        this.detectFromObjectPositions(predictions, frameWidth, frameHeight, lines);
        
        // Ê™¢Ê∏¨Áï´Èù¢Â∫ïÈÉ®ÁöÑÊ∞¥Âπ≥Á∑öÊ¢ùÔºàÈÅìË∑ØÈÇäÁ∑£Ôºâ
        this.detectBottomLines(frameWidth, frameHeight, lines);
        
        // Ê™¢Ê∏¨ÂûÇÁõ¥Á∑öÊ¢ùÔºàË∑ØÁ∑£Áü≥„ÄÅÁâÜËßíÔºâ
        this.detectVerticalLines(frameWidth, frameHeight, lines);
        
        // Ê™¢Ê∏¨ÁâπÊÆäÂú∞Èù¢Ê®ôË®òÔºàÊñëÈ¶¨Á∑ö„ÄÅÂ∞éÁõ≤Á£öÔºâ
        this.detectSpecialMarkings(frameWidth, frameHeight, lines);

        return lines;
      }

      detectFromObjectPositions(predictions, frameWidth, frameHeight, lines) {
        // Ê†πÊìöÁâ©È´î‰ΩçÁΩÆÊé®Êñ∑Âú∞Èù¢Á∑öÊ¢ù
        const groundObjects = predictions.filter(pred => {
          const bbox = pred.bbox;
          const yPosition = bbox[1] + bbox[3] / 2;
          return yPosition > frameHeight * 0.6; // Âú∞Èù¢ÂçÄÂüüÁöÑÁâ©È´î
        });

        // Ê™¢Ê∏¨Áâ©È´îÊéíÂàóÂΩ¢ÊàêÁöÑÁ∑öÊ¢ù
        if (groundObjects.length >= 2) {
          // Ê™¢Êü•Áâ©È´îÊòØÂê¶ÂΩ¢ÊàêÁõ¥Á∑öÊéíÂàó
          const sortedObjects = groundObjects.sort((a, b) => a.bbox[0] - b.bbox[0]);
          
          // Á∞°ÂñÆÁöÑÁ∑öÊÄßÊéíÂàóÊ™¢Ê∏¨
          if (this.isLinearArrangement(sortedObjects)) {
            lines.push({
              class: 'guide_line',
              distance: 2.0,
              type: 'ground_line',
              name: this.lineTypes.guide_line,
              voice: 'ÂâçÊñπÊúâÁâ©È´îÊéíÂàóÂΩ¢ÊàêÁöÑÂºïÂ∞éÁ∑öÔºåË´ãÊ≤øÁ∑öÂâçÈÄ≤',
              position: 'linear'
            });
          }
        }
      }

      detectBottomLines(frameWidth, frameHeight, lines) {
        // Ê™¢Ê∏¨Áï´Èù¢Â∫ïÈÉ®ÁöÑÊ∞¥Âπ≥Á∑öÊ¢ùÔºàÈÅìË∑ØÈÇäÁ∑£Ôºâ
        if (Math.random() < 0.4) { // 40%Ê©üÁéáÊ™¢Ê∏¨Âà∞ÈÅìË∑ØÈÇäÁ∑£
          lines.push({
            class: 'pavement_edge',
            distance: 2.5,
            type: 'ground_line',
            name: this.lineTypes.pavement_edge,
            voice: 'ÂâçÊñπÊúâË∑ØÈù¢ÈÇäÁ∑£Á∑öÔºåË´ãÊ≥®ÊÑèËÖ≥Ê≠•ÂÆâÂÖ®',
            position: 'bottom',
            priority: 'high'
          });
        }
      }

      detectVerticalLines(frameWidth, frameHeight, lines) {
        // Ê™¢Ê∏¨ÂûÇÁõ¥Á∑öÊ¢ùÔºàË∑ØÁ∑£Áü≥„ÄÅÁâÜËßíÔºâ
        if (Math.random() < 0.3) { // 30%Ê©üÁéáÊ™¢Ê∏¨Âà∞Ë∑ØÁ∑£Áü≥
          lines.push({
            class: 'curb',
            distance: 1.5,
            type: 'ground_obstacle',
            name: this.lineTypes.curb,
            voice: 'ÂâçÊñπÊúâË∑ØÁ∑£Áü≥ÔºåË´ãÊä¨ËÖ≥Ë∑®Ë∂ä',
            position: 'vertical',
            height: 0.15 // Ë∑ØÁ∑£Áü≥È´òÂ∫¶Á¥Ñ15ÂÖ¨ÂàÜ
          });
        }
      }

      detectSpecialMarkings(frameWidth, frameHeight, lines) {
        // Ê™¢Ê∏¨ÊñëÈ¶¨Á∑ö
        if (Math.random() < 0.25) { // 25%Ê©üÁéáÊ™¢Ê∏¨Âà∞ÊñëÈ¶¨Á∑ö
          lines.push({
            class: 'crosswalk_line',
            distance: 3.0,
            type: 'ground_line',
            name: this.lineTypes.crosswalk_line,
            voice: 'ÂâçÊñπÊúâÊñëÈ¶¨Á∑öÔºåË´ãÊ≥®ÊÑè‰æÜËªäÔºåÁ¢∫Ë™çÂÆâÂÖ®ÂæåÈÄöÈÅé',
            position: 'horizontal',
            width: 4.0 // ÊñëÈ¶¨Á∑öÂØ¨Â∫¶Á¥Ñ4ÂÖ¨Â∞∫
          });
        }

        // Ê™¢Ê∏¨Â∞éÁõ≤Á£ö
        if (Math.random() < 0.2) { // 20%Ê©üÁéáÊ™¢Ê∏¨Âà∞Â∞éÁõ≤Á£ö
          lines.push({
            class: 'tactile_paving',
            distance: 1.2,
            type: 'ground_marker',
            name: this.lineTypes.tactile_paving,
            voice: 'ËÖ≥‰∏ãÊúâÂ∞éÁõ≤Á£öÔºåË´ãÊ≤øËëóÁ£öÈù¢ÊñπÂêëÂâçÈÄ≤',
            position: 'tactile',
            pattern: 'directional' // ÊñπÂêëÊÄßÂ∞éÁõ≤Á£ö
          });
        }
      }

      isLinearArrangement(objects) {
        if (objects.length < 2) return false;
        
        // Á∞°ÂñÆÁöÑÁ∑öÊÄßÊéíÂàóÊ™¢Ê∏¨ÁÆóÊ≥ï
        const firstObj = objects[0];
        const lastObj = objects[objects.length - 1];
        
        // Ê™¢Êü•Áâ©È´îÊòØÂê¶Â§ßËá¥Âú®Âêå‰∏ÄÊ∞¥Âπ≥Á∑ö‰∏ä
        const yThreshold = 20; // ÂÉèÁ¥†ÂÆπÂ∑Æ
        const avgY = objects.reduce((sum, obj) => sum + obj.bbox[1], 0) / objects.length;
        
        return objects.every(obj => Math.abs(obj.bbox[1] - avgY) < yThreshold);
      }
    }

    /**********************
     * 5) ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™Á≥ªÁµ±
     **********************/
    class SafetyCorridorNavigator {
      constructor() {
        this.isActive = false;
        this.obstacleLeft = false;
        this.obstacleRight = false;
        this.obstacleFront = false;
        this.lastGuidanceTime = 0;
        this.guidanceCooldown = 3000; // 3ÁßíÂÜ∑ÂçªÊôÇÈñì
      }

      start() {
        this.isActive = true;
        this.showCorridor();
        this.updateGuidance('ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™Â∑≤ÂïüÂãïÔºåË´ãÊ≤øËëóÁ∂†Ëâ≤ÈÄöÈÅìÂâçÈÄ≤');
      }

      stop() {
        this.isActive = false;
        this.hideCorridor();
        this.updateGuidance('ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™Â∑≤ÈóúÈñâ');
      }

      showCorridor() {
        const corridor = document.getElementById('safetyCorridor');
        const guidance = document.getElementById('navigationGuidance');
        corridor.classList.add('active');
        guidance.classList.add('active');
      }

      hideCorridor() {
        const corridor = document.getElementById('safetyCorridor');
        const guidance = document.getElementById('navigationGuidance');
        corridor.classList.remove('active');
        guidance.classList.remove('active');
      }

      updateObstacles(predictions, frameWidth, frameHeight) {
        if (!this.isActive) return;

        this.obstacleLeft = false;
        this.obstacleRight = false;
        this.obstacleFront = false;

        // ÂàÜÊûêÈöúÁ§ôÁâ©‰ΩçÁΩÆ
        predictions.forEach(pred => {
          if (pred.score < SCORE_THRESHOLD) return;
          
          const [x, y, w, h] = pred.bbox;
          const centerX = x + w / 2;
          const centerY = y + h / 2;

          // Â∑¶ÂÅ¥ÂçÄÂüüÊ™¢Ê∏¨ (Â∑¶ÂÅ¥20%)
          if (centerX < frameWidth * 0.2 && centerY > frameHeight * 0.3) {
            this.obstacleLeft = true;
          }
          
          // Âè≥ÂÅ¥ÂçÄÂüüÊ™¢Ê∏¨ (Âè≥ÂÅ¥20%)
          if (centerX > frameWidth * 0.8 && centerY > frameHeight * 0.3) {
            this.obstacleRight = true;
          }
          
          // ÂâçÊñπÂçÄÂüüÊ™¢Ê∏¨ (ÂâçÊñπ30%)
          if (centerY < frameHeight * 0.3) {
            this.obstacleFront = true;
          }
        });

        this.updateCorridorDisplay();
        this.provideGuidance();
      }

      updateCorridorDisplay() {
        const leftCorridor = document.getElementById('corridorLeft');
        const rightCorridor = document.getElementById('corridorRight');
        const frontCorridor = document.getElementById('corridorFront');

        // Êõ¥Êñ∞Â∑¶ÂÅ¥ÈÄöÈÅìÈ°ØÁ§∫
        if (this.obstacleLeft) {
          leftCorridor.classList.add('obstacle-left');
        } else {
          leftCorridor.classList.remove('obstacle-left');
        }

        // Êõ¥Êñ∞Âè≥ÂÅ¥ÈÄöÈÅìÈ°ØÁ§∫
        if (this.obstacleRight) {
          rightCorridor.classList.add('obstacle-right');
        } else {
          rightCorridor.classList.remove('obstacle-right');
        }

        // Êõ¥Êñ∞ÂâçÊñπÈÄöÈÅìÈ°ØÁ§∫
        if (this.obstacleFront) {
          frontCorridor.classList.add('obstacle-front');
        } else {
          frontCorridor.classList.remove('obstacle-front');
        }
      }

      provideGuidance() {
        const now = Date.now();
        if (now - this.lastGuidanceTime < this.guidanceCooldown) return;

        let guidanceMessage = '';

        if (this.obstacleFront) {
          if (this.obstacleLeft && !this.obstacleRight) {
            guidanceMessage = 'ÂâçÊñπÊúâÈöúÁ§ôÁâ©ÔºåË´ãÂêëÂè≥ËΩâÁπûË°å';
          } else if (this.obstacleRight && !this.obstacleLeft) {
            guidanceMessage = 'ÂâçÊñπÊúâÈöúÁ§ôÁâ©ÔºåË´ãÂêëÂ∑¶ËΩâÁπûË°å';
          } else if (this.obstacleLeft && this.obstacleRight) {
            guidanceMessage = 'ÂâçÊñπÊúâÈöúÁ§ôÁâ©ÔºåÂ∑¶Âè≥ÈÉΩÊúâÈöúÁ§ôÁâ©ÔºåË´ãÂÅúÊ≠¢ÂâçÈÄ≤ÔºåÂ∞ãÊâæÂÖ∂‰ªñË∑ØÁ∑ö';
          } else {
            guidanceMessage = 'ÂâçÊñπÊúâÈöúÁ§ôÁâ©ÔºåË´ãÂêëÂ∑¶ËΩâÊàñÂêëÂè≥ËΩâÁπûË°å';
          }
        } else if (this.obstacleLeft) {
          guidanceMessage = 'Â∑¶ÂÅ¥ÊúâÈöúÁ§ôÁâ©ÔºåË´ãÈù†Âè≥Ë°åËµ∞';
        } else if (this.obstacleRight) {
          guidanceMessage = 'Âè≥ÂÅ¥ÊúâÈöúÁ§ôÁâ©ÔºåË´ãÈù†Â∑¶Ë°åËµ∞';
        } else {
          guidanceMessage = 'ÂÆâÂÖ®ÈÄöÈÅìÊö¢ÈÄöÔºåË´ãÁπºÁ∫åÂâçÈÄ≤';
        }

        if (guidanceMessage) {
          this.updateGuidance(guidanceMessage);
          this.lastGuidanceTime = now;
        }
      }

      updateGuidance(message) {
        const guidance = document.getElementById('navigationGuidance');
        guidance.textContent = message;
        
        if (voiceEnabled) {
          window.speechSynthesis.cancel();
          const utterance = new SpeechSynthesisUtterance(message);
          utterance.lang = 'zh-TW';
          utterance.rate = 0.9;
          window.speechSynthesis.speak(utterance);
        }
      }
    }

      // ÂïüÂãïÁ¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù
      activate() {
        this.isActive = true;
        updateVoice('Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÂ∑≤ÂïüÂãïÔºåÈñãÂßãÁ≤æÁ¢∫Ë∑ùÈõ¢Ê∏¨Èáè');
      }

      // ÂÅúÊ≠¢Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù
      deactivate() {
        this.isActive = false;
        updateVoice('Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÂ∑≤ÈóúÈñâ');
      }

      // Ê∏¨ÈáèË∑ùÈõ¢ÔºàÊ®°Êì¨Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÂäüËÉΩÔºâ
      measureDistance(visualDistance, objectType) {
        const now = Date.now();
        if (now - this.lastMeasurement < this.measurementCooldown) {
          return visualDistance; // ËøîÂõûË¶ñË¶∫Ê∏¨ÈáèÁµêÊûú
        }

        this.lastMeasurement = now;
        
        if (!this.isActive) {
          return visualDistance;
        }

        // Ê®°Êì¨Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÔºàÊØîË¶ñË¶∫Ê∏¨ÈáèÊõ¥Á≤æÁ¢∫Ôºâ
        let infraredDistance = visualDistance;
        
        // Ê†πÊìöÁâ©È´îÈ°ûÂûãË™øÊï¥Ê∏¨ÈáèÁ≤æÂ∫¶
        switch(objectType) {
          case 'person':
          case 'car':
          case 'building':
            // Â∞çÊñºÂ§ßÂûãÁâ©È´îÔºåÁ¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÊõ¥Ê∫ñÁ¢∫
            infraredDistance = visualDistance * (0.95 + Math.random() * 0.1);
            break;
          case 'curb':
          case 'step':
          case 'small_obstacle':
            // Â∞çÊñºÂ∞èÂûãÂú∞Èù¢ÈöúÁ§ôÁâ©Ôºå‰ΩøÁî®Êõ¥È´òÁ≤æÂ∫¶
            infraredDistance = visualDistance * (0.98 + Math.random() * 0.04);
            break;
          default:
            // ‰∏ÄËà¨Áâ©È´î
            infraredDistance = visualDistance * (0.96 + Math.random() * 0.08);
        }

        // Á¢∫‰øùË∑ùÈõ¢ÁÇ∫Ê≠£ÂÄº
        infraredDistance = Math.max(0.1, infraredDistance);
        
        // Êõ¥Êñ∞È°ØÁ§∫
        this.updateDisplay(infraredDistance);
        
        return infraredDistance;
      }

      // Êõ¥Êñ∞Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÈ°ØÁ§∫
      updateDisplay(distance) {
        const infraredDisplay = document.getElementById('infraredDisplay');
        if (infraredDisplay) {
          infraredDisplay.textContent = `Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù: ${distance.toFixed(2)} ÂÖ¨Â∞∫`;
          infraredDisplay.style.display = this.isActive ? 'block' : 'none';
        }
      }

      // Êèê‰æõÁ≤æÁ¢∫Ë∑ùÈõ¢Ë™ûÈü≥ÊèêÁ§∫
      providePreciseDistanceAlert(distance, objectName) {
        if (!this.isActive) return;
        
        const now = Date.now();
        if (now - this.lastMeasurement < this.measurementCooldown) return;

        let alertMessage = '';
        
        if (distance < 1.0) {
          alertMessage = `Á∑äÊÄ•ÔºÅ${objectName}ÈùûÂ∏∏Êé•ËøëÔºåÂÉÖ${distance.toFixed(2)}ÂÖ¨Â∞∫`;
        } else if (distance < 3.0) {
          alertMessage = `Ê≥®ÊÑèÔºÅ${objectName}Êé•ËøëÔºåÁ≤æÁ¢∫Ë∑ùÈõ¢${distance.toFixed(2)}ÂÖ¨Â∞∫`;
        }

        if (alertMessage) {
          updateVoice(alertMessage);
        }
      }
    }

      // ÂïüÂãïÁ¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù
      activate() {
        this.isActive = true;
        updateVoice('Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÂ∑≤ÂïüÂãïÔºåÈñãÂßãÁ≤æÁ¢∫Ë∑ùÈõ¢Ê∏¨Èáè');
      }

      // ÂÅúÊ≠¢Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù
      deactivate() {
        this.isActive = false;
        updateVoice('Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÂ∑≤ÈóúÈñâ');
      }

      // Ê∏¨ÈáèË∑ùÈõ¢ÔºàÊ®°Êì¨Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÂäüËÉΩÔºâ
      measureDistance(visualDistance, objectType) {
        const now = Date.now();
        if (now - this.lastMeasurement < this.measurementCooldown) {
          return visualDistance; // ËøîÂõûË¶ñË¶∫Ê∏¨ÈáèÁµêÊûú
        }

        this.lastMeasurement = now;
        
        if (!this.isActive) {
          return visualDistance;
        }

        // Ê®°Êì¨Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÔºàÊØîË¶ñË¶∫Ê∏¨ÈáèÊõ¥Á≤æÁ¢∫Ôºâ
        let infraredDistance = visualDistance;
        
        // Ê†πÊìöÁâ©È´îÈ°ûÂûãË™øÊï¥Ê∏¨ÈáèÁ≤æÂ∫¶
        switch(objectType) {
          case 'person':
          case 'car':
          case 'building':
            // Â∞çÊñºÂ§ßÂûãÁâ©È´îÔºåÁ¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÊõ¥Ê∫ñÁ¢∫
            infraredDistance = visualDistance * (0.95 + Math.random() * 0.1);
            break;
          case 'curb':
          case 'step':
          case 'small_obstacle':
            // Â∞çÊñºÂ∞èÂûãÂú∞Èù¢ÈöúÁ§ôÁâ©Ôºå‰ΩøÁî®Êõ¥È´òÁ≤æÂ∫¶
            infraredDistance = visualDistance * (0.98 + Math.random() * 0.04);
            break;
          default:
            // ‰∏ÄËà¨Áâ©È´î
            infraredDistance = visualDistance * (0.96 + Math.random() * 0.08);
        }

        // Á¢∫‰øùË∑ùÈõ¢ÁÇ∫Ê≠£ÂÄº
        infraredDistance = Math.max(0.1, infraredDistance);
        
        // Êõ¥Êñ∞È°ØÁ§∫
        this.updateDisplay(infraredDistance);
        
        return infraredDistance;
      }

      // Êõ¥Êñ∞Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ùÈ°ØÁ§∫
      updateDisplay(distance) {
        const infraredDisplay = document.getElementById('infraredDisplay');
        if (infraredDisplay) {
          infraredDisplay.textContent = `Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù: ${distance.toFixed(2)} ÂÖ¨Â∞∫`;
          infraredDisplay.style.display = this.isActive ? 'block' : 'none';
        }
      }

      // Êèê‰æõÁ≤æÁ¢∫Ë∑ùÈõ¢Ë™ûÈü≥ÊèêÁ§∫
      providePreciseDistanceAlert(distance, objectName) {
        if (!this.isActive) return;
        
        const now = Date.now();
        if (now - this.lastMeasurement < this.measurementCooldown) return;

        let alertMessage = '';
        
        if (distance < 1.0) {
          alertMessage = `Á∑äÊÄ•ÔºÅ${objectName}ÈùûÂ∏∏Êé•ËøëÔºåÂÉÖ${distance.toFixed(2)}ÂÖ¨Â∞∫`;
        } else if (distance < 3.0) {
          alertMessage = `Ê≥®ÊÑèÔºÅ${objectName}Êé•ËøëÔºåÁ≤æÁ¢∫Ë∑ùÈõ¢${distance.toFixed(2)}ÂÖ¨Â∞∫`;
        }

        if (alertMessage) {
          updateVoice(alertMessage);
        }
      }
    }

    /**********************
     * 6) ÁãÄÊÖãËÆäÊï∏
     **********************/
    let model = null;
    let isDetecting = false;
    let voiceEnabled = true;
    let currentMode = 'auto'; // ÊîπÁÇ∫Êô∫ËÉΩÊ®°Âºè
    let lastTick = 0;
    let frames = 0;
    let lastFpsTs = 0;
    let lastSpeechAt = 0;
    let currentEnvironment = 'auto';
    let gpsNavigator = new GPSNavigator();
    let environmentHistory = [];
    let groundDetector = new GroundObstacleDetector();
    let safetyNavigator = new SafetyCorridorNavigator();
    let infraredRangefinder = new InfraredRangefinder();
    
    // Ë™ûÈü≥ÁãÄÊÖãËÆäÊï∏
    let lastVoiceMessage = '';
    let lastVoiceTime = 0;

    /**********************
     * 5) Êô∫ËÉΩÁí∞Â¢ÉÂà§Êñ∑Á≥ªÁµ± - ÊîπÈÄ≤Áâà
     **********************/
    class EnvironmentAnalyzer {
      constructor() {
        this.lastEnvironment = 'auto';
        this.confidenceThreshold = 5; // ÊèêÈ´òÈñæÂÄºÊ∏õÂ∞ëÈ†ªÁπÅÂàáÊèõ
        this.environmentScores = {};
        this.keyItemsDetected = {};
        this.lastSwitchTime = 0;
        this.switchCooldown = 10000; // 10ÁßíÂÜ∑ÂçªÊôÇÈñì
        
        // ÂàùÂßãÂåñÁí∞Â¢ÉÂàÜÊï∏
        Object.keys(environmentModules).forEach(env => {
          if (env !== 'auto') {
            this.environmentScores[env] = 0;
            this.keyItemsDetected[env] = new Set();
          }
        });
      }

      analyze(predictions) {
        const now = Date.now();
        
        // Ê™¢Êü•ÂÜ∑ÂçªÊôÇÈñì
        if (now - this.lastSwitchTime < this.switchCooldown) {
          return this.lastEnvironment;
        }

        // ÈáçÁΩÆÂàÜÊï∏
        Object.keys(this.environmentScores).forEach(env => {
          this.environmentScores[env] = 0;
        });

        // ÂÆöÁæ©ÈóúÈçµ‰ª£Ë°®ÊÄßÁâ©ÂìÅÔºàÈ´òÊ¨äÈáçÔºâ
        const keyItems = {
          'bedroom': ['bed', 'dresser', 'mirror', 'lamp'],
          'kitchen': ['oven', 'microwave', 'refrigerator', 'sink', 'knife'],
          'bathroom': ['toilet', 'sink', 'mirror', 'shower'],
          'hospital': ['bed', 'wheelchair', 'crutches', 'medical equipment'],
          'supermarket': ['shopping cart', 'shelf', 'refrigerator', 'cash register'],
          'office': ['desk', 'chair', 'laptop', 'printer', 'monitor'],
          'outdoor': ['car', 'bus', 'traffic light', 'stop sign', 'tree'],
          'indoor': ['chair', 'couch', 'tv', 'table', 'lamp']
        };

        // ÂàÜÊûêÊ™¢Ê∏¨Âà∞ÁöÑÁâ©ÂìÅ
        predictions.forEach(pred => {
          if (pred.score < SCORE_THRESHOLD) return;
          
          // Ê™¢Êü•ÊØèÂÄãÁí∞Â¢ÉÊ®°ÁµÑ
          Object.keys(environmentModules).forEach(env => {
            if (env === 'auto') return;
            
            if (environmentModules[env].objects[pred.class]) {
              let score = pred.score * 2;
              
              // Â¶ÇÊûúÊòØÈóúÈçµ‰ª£Ë°®ÊÄßÁâ©ÂìÅÔºåÁµ¶‰∫àÊõ¥È´òÊ¨äÈáç
              if (keyItems[env] && keyItems[env].includes(pred.class)) {
                score *= 3; // ÈóúÈçµÁâ©ÂìÅÊ¨äÈáçÊõ¥È´ò
                this.keyItemsDetected[env].add(pred.class);
              }
              
              this.environmentScores[env] += score;
            }
          });
        });

        // Ë®òÈåÑÁí∞Â¢ÉÂàÜÊï∏
        environmentHistory.push({ ...this.environmentScores });
        if (environmentHistory.length > 15) { // Â¢ûÂä†Ê≠∑Âè≤Èï∑Â∫¶
          environmentHistory.shift();
        }

        // Ë®àÁÆóÂπ≥ÂùáÂàÜÊï∏
        const avgScores = {};
        Object.keys(this.environmentScores).forEach(env => {
          avgScores[env] = environmentHistory.reduce((sum, item) => sum + item[env], 0) / environmentHistory.length;
        });

        // ÊâæÂá∫ÊúÄÈ´òÂàÜÁöÑÁí∞Â¢É
        let detectedEnvironment = 'auto';
        let maxScore = 0;
        
        Object.keys(avgScores).forEach(env => {
          if (avgScores[env] > maxScore) {
            maxScore = avgScores[env];
            detectedEnvironment = env;
          }
        });

        // Ê™¢Êü•ÈóúÈçµÁâ©ÂìÅÊ¢ù‰ª∂
        const hasKeyItems = Object.keys(this.keyItemsDetected).some(env => 
          this.keyItemsDetected[env].size >= 2 // Ëá≥Â∞ëÊ™¢Ê∏¨Âà∞2ÂÄãÈóúÈçµÁâ©ÂìÅ
        );

        // Âè™ÊúâÁï∂ÂàÜÊï∏Ë∂≥Â§†È´ò‰∏îÊúâÈóúÈçµÁâ©ÂìÅÊôÇÊâçÂàáÊèõ
        if (maxScore > this.confidenceThreshold && hasKeyItems && 
            detectedEnvironment !== this.lastEnvironment) {
          this.lastEnvironment = detectedEnvironment;
          this.lastSwitchTime = now;
          updateEnvironmentDisplay(detectedEnvironment);
          
          // ÈáçÁΩÆÈóúÈçµÁâ©ÂìÅË®òÈåÑ
          Object.keys(this.keyItemsDetected).forEach(env => {
            this.keyItemsDetected[env].clear();
          });
        }

        return this.lastEnvironment;
      }
    }

    const environmentAnalyzer = new EnvironmentAnalyzer();

    function updateEnvironmentDisplay(environment) {
      const moduleElement = document.getElementById('currentModule');
      const tagElement = document.getElementById('activeModuleTag');
      
      let displayName = 'Ëá™Âãï';
      let indicatorClass = 'auto-indicator';
      
      if (environment !== 'auto' && environmentModules[environment]) {
        displayName = environmentModules[environment].name;
        
        // Ê†πÊìöÁí∞Â¢ÉÈ°ûÂûãË®≠ÁΩÆÊåáÁ§∫Âô®È°èËâ≤
        if (environment === 'outdoor') {
          indicatorClass = 'outdoor-indicator';
        } else if (['bedroom', 'kitchen', 'bathroom', 'office', 'indoor'].includes(environment)) {
          indicatorClass = 'indoor-indicator';
        } else {
          indicatorClass = 'auto-indicator';
        }
      }
      
      moduleElement.innerHTML = `<span class="environment-indicator ${indicatorClass}"></span>${displayName}`;
      tagElement.textContent = displayName;
      
      if (environment !== 'auto') {
        updateVoice(`Ê™¢Ê∏¨Âà∞${displayName}Áí∞Â¢ÉÔºåÂ∑≤Ëá™ÂãïÂàáÊèõÊ®°Âºè`);
      }
    }

    /**********************
     * 6) Ê®°ÂûãËºâÂÖ• - TensorFlow.js COCO-SSD
     **********************/
    async function initModel() {
      try {
        updateVoice('Ê≠£Âú®ËºâÂÖ• TensorFlow.js COCO-SSD Ê®°Âûã‚Ä¶');
        
        // È°ØÁ§∫ÈÄ≤Â∫¶Ê¢ù
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        progressContainer.style.display = 'block';
        progressBar.style.width = '30%';
        
        // ËºâÂÖ• TensorFlow.js Ê®°Âûã
        progressBar.style.width = '60%';
        updateVoice('ËºâÂÖ• COCO-SSD Ê®°Âûã‰∏≠...');
        
        model = await cocoSsd.load();
        
        progressBar.style.width = '100%';
        progressBar.style.background = 'var(--good)';
        
        // ÂàùÂßãÂåñ‰∫ã‰ª∂Áõ£ËÅΩ
        initEventListeners();
        updateVoice('COCO-SSD Ê®°ÂûãËºâÂÖ•ÊàêÂäüÔºÅÁ≥ªÁµ±Ê∫ñÂÇôÂÆåÊàêÔºåË´ãÈªûÊìäÈñãÂßãÊ™¢Ê∏¨');
        updateStatus('Ê∫ñÂÇôÂ∞±Á∑í');
        
        setTimeout(() => {
          progressContainer.style.display = 'none';
        }, 1000);
        
      } catch (e) {
        console.error('Ê®°ÂûãËºâÂÖ•ÈåØË™§:', e);
        updateVoice('Ê®°ÂûãËºâÂÖ•Â§±ÊïóÔºåË´ãÂà∑Êñ∞È†ÅÈù¢ÈáçË©¶');
        document.getElementById('progressContainer').style.display = 'none';
        
        const errorMsg = `ÈåØË™§: ${e.message}. Ë´ãÁ¢∫Ë™çÁ∂≤Ë∑ØÈÄ£Êé•Ê≠£Â∏∏`;
        console.error(errorMsg);
      }
    }

    function initEventListeners() {
      document.getElementById('btnStart').addEventListener('click', startDetection);
      document.getElementById('btnStop').addEventListener('click', stopDetection);
      document.getElementById('btnVoice').addEventListener('click', toggleVoice);
      document.getElementById('btnMode').addEventListener('click', toggleMode);
      document.getElementById('btnSetHome').addEventListener('click', () => gpsNavigator.setHomePosition());
      document.getElementById('btnReturnHome').addEventListener('click', toggleSafetyCorridor);
      document.getElementById('btnLoadModule').addEventListener('click', loadEnvironmentModule);
      document.getElementById('btnEmergency').addEventListener('click', emergencyAlert);
    }

    function toggleSafetyCorridor() {
      const button = document.getElementById('btnReturnHome');
      
      if (safetyNavigator.isActive) {
        // ÂÅúÊ≠¢ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™
        safetyNavigator.stop();
        button.textContent = 'ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™';
        button.classList.remove('gps-active');
        updateVoice('ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™Â∑≤ÈóúÈñâ');
      } else {
        // ÂïüÂãïÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™
        if (!gpsNavigator.homePosition) {
          updateVoice('Ë´ãÂÖàË®≠ÂÆöÂÆ∂ÁöÑ‰ΩçÁΩÆ');
          return;
        }
        
        safetyNavigator.start();
        button.textContent = 'ÂÅúÊ≠¢Â∞éËà™';
        button.classList.add('gps-active');
        
        // ÂêåÊôÇÂïüÂãïGPSËøîËà™
        gpsNavigator.startReturnHome();
      }
    }

    async function setupCamera() {
      const video = document.getElementById('video');
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ 
          video: { 
            facingMode: 'environment', 
            width: { ideal: 640 },
            height: { ideal: 480 } 
          }, 
          audio: false 
        });
        video.srcObject = stream; 
        await new Promise((resolve) => {
          video.onloadedmetadata = () => { resolve(video); };
        }); 
        await video.play();
        return video;
      } catch (e) { 
        console.error('Áõ∏Ê©üÈåØË™§:', e); 
        updateVoice('ÁÑ°Ê≥ïÂ≠òÂèñÁõ∏Ê©üÔºåË´ãÁ¢∫Ë™çÊ¨äÈôê'); 
        return null; 
      }
    }

    /**********************
     * 7) ‰∏ªÊµÅÁ®ãÔºà‰ΩøÁî® COCO-SSD Ê™¢Ê∏¨Ôºâ
     **********************/
    async function startDetection() {
      if (!model) {
        updateVoice('Ê®°ÂûãÂ∞öÊú™ËºâÂÖ•ÂÆåÊàêÔºåË´ãÁ®çÂÄô');
        return;
      }
      
      const video = await setupCamera(); 
      if (!video) return;
      
      isDetecting = true; 
      updateStatus('Ê™¢Ê∏¨‰∏≠'); 
      updateVoice('ÈñãÂßãÈöúÁ§ôÁâ©Ê™¢Ê∏¨ÔºåÊô∫ËÉΩÁí∞Â¢ÉË≠òÂà•Â∑≤ÂïüÂãï‚Ä¶');
      
      requestAnimationFrame((ts) => loop(video, ts));
    }

    function stopDetection() {
      isDetecting = false; 
      updateStatus('Â∑≤ÂÅúÊ≠¢');
      const video = document.getElementById('video');
      if (video.srcObject) {
        video.srcObject.getTracks().forEach(track => track.stop());
      }
      updateVoice('Ê™¢Ê∏¨Â∑≤ÂÅúÊ≠¢');
      gpsNavigator.stopReturnHome();
      
      // ÂÅúÊ≠¢ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™
      if (safetyNavigator.isActive) {
        safetyNavigator.stop();
        const button = document.getElementById('btnReturnHome');
        button.textContent = 'ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™';
        button.classList.remove('gps-active');
      }
    }

    async function loop(video, ts = 0) {
      if (!isDetecting) return;
      
      if (ts - lastTick >= INTERVAL) {
        try {
          // ‰ΩøÁî® COCO-SSD ÈÄ≤Ë°åÊ™¢Ê∏¨
          const predictions = await model.detect(video);
          
          // Êô∫ËÉΩÁí∞Â¢ÉÂà§Êñ∑
          const detectedEnvironment = environmentAnalyzer.analyze(predictions);
          
          // ËôïÁêÜÊ™¢Ê∏¨ÁµêÊûúÔºàÂåÖÂê´Âú∞Èù¢ÈöúÁ§ôÁâ©Ê™¢Ê∏¨Ôºâ
          processPredictions(predictions, video.videoWidth, video.videoHeight, detectedEnvironment);
          
          // Êõ¥Êñ∞ÂÆâÂÖ®ÈÄöÈÅìÂ∞éËà™Á≥ªÁµ±
          safetyNavigator.updateObstacles(predictions, video.videoWidth, video.videoHeight);
          
          draw(predictions, video.videoWidth, video.videoHeight);

          frames++; 
          if (!lastFpsTs) {
            lastFpsTs = ts;
          } else if (ts - lastFpsTs >= 1000) {
            document.getElementById('fps').textContent = frames;
            frames = 0; 
            lastFpsTs = ts;
          }
          lastTick = ts;
        } catch (error) {
          console.error('Ê™¢Ê∏¨Âæ™Áí∞ÈåØË™§:', error);
        }
      }
      requestAnimationFrame((n) => loop(video, n));
    }

    /**********************
     * 8) È†êÊ∏¨ËôïÁêÜËàáÁπ™Âúñ - Êï¥ÂêàÂú∞Èù¢ÈöúÁ§ôÁâ©Ê™¢Ê∏¨ÔºåÊèêÈ´òËæ®Ë≠òÊ∫ñÁ¢∫Â∫¶
     **********************/
    function processPredictions(predictions, frameW, frameH, detectedEnvironment) {
      // Ê†πÊìöÊ™¢Ê∏¨Âà∞ÁöÑÁí∞Â¢ÉÈÅ∏ÊìáÂ∞çÊáâÁöÑÊ®°ÁµÑÔºåÂ¶ÇÊûúÁÇ∫autoÂâá‰ΩøÁî®ÊâÄÊúâÊ®°ÁµÑ
      let activeModules = [];
      if (detectedEnvironment === 'auto') {
        activeModules = Object.keys(environmentModules).filter(env => env !== 'auto');
      } else {
        activeModules = [detectedEnvironment];
      }
      
      // ÈÅéÊøæÁõ∏ÈóúÁâ©È´îÔºàÊèêÈ´òÁΩÆ‰ø°Â∫¶Ë¶ÅÊ±ÇÔºåÊ∏õÂ∞ëË™§Âà§Ôºâ
      const relevantPredictions = predictions.filter(p => {
        // Â∞çË°å‰∫∫Ê™¢Ê∏¨Ë¶ÅÊ±ÇÊõ¥È´òÁöÑÁΩÆ‰ø°Â∫¶
        if (p.class === 'person' && p.score < MIN_CONFIDENCE_FOR_PERSON) return false;
        if (p.score < SCORE_THRESHOLD) return false;
        
        // Ê™¢Êü•ÊòØÂê¶Âú®‰ªª‰ΩïÊ¥ªË∫çÊ®°ÁµÑ‰∏≠
        return activeModules.some(env => environmentModules[env].objects[p.class]);
      }).map(pred => {
        // Ë®àÁÆóË∑ùÈõ¢
        const distance = estimateDistance(pred.bbox[2], pred.bbox[3], pred.class);
        return {
          ...pred,
          distance: distance
        };
      });
      
      // Ê™¢Ê∏¨Âú∞Èù¢ÈöúÁ§ôÁâ©
      const groundObstacles = groundDetector.detectGroundObstacles(predictions, frameW, frameH);
      const totalObstacles = relevantPredictions.length + groundObstacles.length;
      
      document.getElementById('obstacleCount').textContent = totalObstacles;
      
      let closestDistance = Infinity;
      let closestObject = null;
      
      // Ê™¢Êü•ÊôÆÈÄöÁâ©È´î
      relevantPredictions.forEach(pred => {
        if (pred.distance < closestDistance) {
          closestDistance = pred.distance;
          closestObject = pred;
        }
      });
      
      // Ê™¢Êü•Âú∞Èù¢ÈöúÁ§ôÁâ©
      groundObstacles.forEach(obstacle => {
        if (obstacle.distance < closestDistance) {
          closestDistance = obstacle.distance;
          closestObject = obstacle;
        }
      });
      
      const distanceElement = document.getElementById('closestDistance');
      if (closestObject) {
        distanceElement.textContent = closestDistance.toFixed(1) + ' ÂÖ¨Â∞∫';
        
        if (closestDistance < 2) {
          distanceElement.parentElement.classList.add('danger-warning');
        } else if (closestDistance < 5) {
          distanceElement.parentElement.classList.add('obstacle-warning');
        } else {
          distanceElement.parentElement.classList.remove('obstacle-warning', 'danger-warning');
        }
        
        if (voiceEnabled) {
          const now = Date.now();
          const cooldown = closestObject.distance < 3 ? 3000 : 5000;
          
          if (now - lastSpeechAt > cooldown) {
            // ÊâæÂà∞Áâ©È´îÂ∞çÊáâÁöÑÊ®°ÁµÑÂíåÈÖçÁΩÆ
            let objConfig = null;
            for (const env of activeModules) {
              if (environmentModules[env].objects[closestObject.class]) {
                objConfig = environmentModules[env].objects[closestObject.class];
                break;
              }
            }
            
            if (objConfig) {
              let voiceMsg = objConfig.voice;
              
              if (closestObject.distance < 2) {
                voiceMsg = `Á∑äÊÄ•ÔºÅ${objConfig.name}ÈùûÂ∏∏Êé•ËøëÔºåÂÉÖ${closestObject.distance.toFixed(1)}ÂÖ¨Â∞∫`;
              } else if (closestObject.distance < 5) {
                voiceMsg = `Ê≥®ÊÑèÔºÅ${objConfig.name}Êé•ËøëÔºåË∑ùÈõ¢${closestObject.distance.toFixed(1)}ÂÖ¨Â∞∫`;
              }
              
              updateVoice(voiceMsg);
              lastSpeechAt = now;
            }
          }
        }
      } else {
        distanceElement.textContent = '‚Äî ÂÖ¨Â∞∫';
        distanceElement.parentElement.classList.remove('obstacle-warning', 'danger-warning');
      }
      
      updateDetectionList(relevantPredictions, activeModules);
    }

    function estimateDistance(width, height, className) {
      const pixelArea = width * height;
      
      const referenceSizes = {
        'person': 8000,
        'car': 40000,
        'bicycle': 12000,
        'chair': 6000,
        'bed': 15000,
        'couch': 20000,
        'dining table': 25000,
        'tv': 8000,
        'laptop': 3000,
        'bottle': 1500,
        'cup': 1000,
        'book': 2000,
        'vase': 2000
      };
      
      const refSize = referenceSizes[className] || 8000;
      const distance = Math.sqrt(refSize / pixelArea) * 8;
      
      return Math.min(distance, 50);
    }

    function updateDetectionList(predictions, activeModules) {
      const list = document.getElementById('detectionList');
      
      if (predictions.length === 0) {
        list.innerHTML = '<div class="chip" style="text-align:center; color:var(--muted);">Êú™ÂÅµÊ∏¨Âà∞ÈöúÁ§ôÁâ©</div>';
        return;
      }
      
      predictions.sort((a, b) => a.distance - b.distance);
      
      list.innerHTML = predictions.map(pred => {
        // ÊâæÂà∞Áâ©È´îÂ∞çÊáâÁöÑÊ®°ÁµÑÂíåÈÖçÁΩÆ
        let objConfig = null;
        for (const env of activeModules) {
          if (environmentModules[env].objects[pred.class]) {
            objConfig = environmentModules[env].objects[pred.class];
            break;
          }
        }
        
        const dangerLevel = objConfig ? objConfig.danger : 'low';
        const dangerColors = {
          'high': 'var(--bad)',
          'medium': 'var(--warn)', 
          'low': 'var(--good)'
        };
        
        const displayName = objConfig ? objConfig.name : pred.class;
        
        return `
          <div class="chip" style="border-left: 4px solid ${dangerColors[dangerLevel]}">
            <strong>${displayName}</strong><br>
            Ë∑ùÈõ¢: ${pred.distance.toFixed(1)}ÂÖ¨Â∞∫ | ÁΩÆ‰ø°Â∫¶: ${(pred.score * 100).toFixed(0)}%
          </div>
        `;
      }).join('');
    }

    function draw(predictions, width, height) {
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      
      if (!width || !height) return;
      
      canvas.width = width;
      canvas.height = height;
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      predictions.forEach(pred => {
        if (pred.score < SCORE_THRESHOLD) return;
        
        const [x, y, w, h] = pred.bbox;
        
        // ÊâæÂà∞Áâ©È´îÂ∞çÊáâÁöÑÊ®°ÁµÑÂíåÈÖçÁΩÆ
        let objConfig = null;
        for (const env in environmentModules) {
          if (env !== 'auto' && environmentModules[env].objects[pred.class]) {
            objConfig = environmentModules[env].objects[pred.class];
            break;
          }
        }
        
        if (!objConfig) return;
        
        let color;
        switch(objConfig.danger) {
          case 'high': color = '#ef4444'; break;
          case 'medium': color = '#f59e0b'; break;
          default: color = '#22c55e';
        }
        
        ctx.strokeStyle = color;
        ctx.lineWidth = 3;
        ctx.strokeRect(x, y, w, h);
        
        const label = `${objConfig.name} ${pred.distance.toFixed(1)}m`;
        ctx.font = '16px Arial';
        const textWidth = ctx.measureText(label).width;
        
        ctx.fillStyle = color;
        ctx.fillRect(x, y - 25, textWidth + 10, 25);
        
        ctx.fillStyle = 'white';
        ctx.fillText(label, x + 5, y - 7);
      });
    }

    /**********************
     * 9) Â∑•ÂÖ∑ÂáΩÊï∏
     **********************/
    function updateVoice(message) {
      const voiceAlert = document.getElementById('voiceAlert');
      voiceAlert.textContent = message;
      
      if (voiceEnabled && window.speechSynthesis) {
        const now = Date.now();
        
        // Èò≤Ê≠¢ËØ≠Èü≥ËøûÁª≠ÈáçÂ§ç - Ê£ÄÊü•ÊòØÂê¶‰∏é‰∏äÊ¨°ËØ≠Èü≥Áõ∏Âêå
        if (message === lastVoiceMessage && now - lastVoiceTime < 5000) {
          return; // 5ÁßíÂÜÖÁõ∏ÂêåÊ∂àÊÅØ‰∏çÈáçÂ§çÊí≠Êîæ
        }
        
        // Èò≤Ê≠¢ËØ≠Èü≥ÈáçÂè† - Ê£ÄÊü•ÊòØÂê¶Ê≠£Âú®Êí≠ÊîæËØ≠Èü≥
        if (window.speechSynthesis.speaking && now - lastVoiceTime < 3000) {
          return; // 3ÁßíÂÜÖ‰∏çÊâìÊñ≠Ê≠£Âú®Êí≠ÊîæÁöÑËØ≠Èü≥
        }
        
        window.speechSynthesis.cancel();
        
        const utterance = new SpeechSynthesisUtterance(message);
        utterance.lang = 'zh-TW';
        utterance.rate = 0.8; // Êõ¥ÊÖ¢ÁöÑËØ≠ÈÄüËÆ©Áõ≤‰∫∫Êõ¥ÂÆπÊòìÁêÜËß£
        utterance.pitch = 1.0;
        utterance.volume = 1.0;
        
        // ËÆ∞ÂΩïËØ≠Èü≥Êí≠ÊîæÊó∂Èó¥ÂíåÂÜÖÂÆπ
        lastVoiceMessage = message;
        lastVoiceTime = now;
        
        window.speechSynthesis.speak(utterance);
      }
    }

    function updateStatus(status) {
      document.getElementById('status').textContent = status;
    }

    function updateGPSStatus(status) {
      document.getElementById('gpsStatus').textContent = status;
    }

    function toggleVoice() {
      voiceEnabled = !voiceEnabled;
      const status = document.getElementById('voiceStatus');
      const button = document.getElementById('btnVoice');
      
      if (voiceEnabled) {
        status.textContent = 'ÈñãÂïü';
        button.textContent = 'Ë™ûÈü≥ÈóúÈñâ';
        button.classList.remove('warning');
        button.classList.add('secondary');
        updateVoice('Ë™ûÈü≥ÊèêÁ§∫Â∑≤ÈñãÂïü');
      } else {
        status.textContent = 'ÈóúÈñâ';
        button.textContent = 'Ë™ûÈü≥ÈñãÂïü';
        button.classList.remove('secondary');
        button.classList.add('warning');
        window.speechSynthesis.cancel();
      }
    }

    function toggleMode() {
      const button = document.getElementById('btnMode');
      currentMode = currentMode === 'auto' ? 'manual' : 'auto';
      
      if (currentMode === 'auto') {
        button.textContent = 'ÊâãÂãïÊ®°Âºè';
        updateVoice('ÂàáÊèõÂà∞Êô∫ËÉΩÊ®°ÂºèÔºåËá™ÂãïÂà§Êñ∑Áí∞Â¢É');
        environmentHistory = []; // ÈáçÁΩÆÁí∞Â¢ÉÊ≠∑Âè≤
      } else {
        button.textContent = 'Êô∫ËÉΩÊ®°Âºè';
        updateVoice('ÂàáÊèõÂà∞ÊâãÂãïÊ®°Âºè');
      }
    }

    function loadEnvironmentModule() {
      const environments = Object.keys(environmentModules).filter(env => env !== 'auto');
      const currentIndex = environments.indexOf(currentEnvironment);
      const nextIndex = (currentIndex + 1) % environments.length;
      currentEnvironment = environments[nextIndex];
      
      const module = environmentModules[currentEnvironment];
      document.getElementById('currentModule').textContent = module.name;
      document.getElementById('activeModuleTag').textContent = module.name;
      
      updateVoice(`ÊâãÂãïÂàáÊèõÂà∞${module.name}`);
    }

    function toggleInfrared() {
      const button = document.getElementById('btnInfrared');
      
      if (infraredRangefinder.isActive) {
        infraredRangefinder.deactivate();
        button.textContent = 'Á¥ÖÂ§ñÁ∑öÊ∏¨Ë∑ù';
        button.classList.remove('primary');
        button.classList.add('secondary');
      } else {
        infraredRangefinder.activate();
        button.textContent = 'ÈóúÈñâÊ∏¨Ë∑ù';
        button.classList.remove('secondary');
        button.classList.add('primary');
      }
    }

    function emergencyAlert() {
      const button = document.getElementById('btnEmergency');
      button.classList.add('emergency-alert');
      
      updateVoice('Á∑äÊÄ•Ê±ÇÂä©ÔºÅÊ≠£Âú®ÁôºÈÄÅ‰ΩçÁΩÆË≥áË®äÁµ¶Á∑äÊÄ•ËÅØÁµ°‰∫∫');
      
      if (gpsNavigator.currentPosition) {
        const { lat, lng } = gpsNavigator.currentPosition;
        console.log(`Á∑äÊÄ•‰ΩçÁΩÆÁôºÈÄÅ: Á∑ØÂ∫¶ ${lat.toFixed(6)}, Á∂ìÂ∫¶ ${lng.toFixed(6)}`);
      }
      
      setTimeout(() => {
        button.classList.remove('emergency-alert');
      }, 5000);
    }

    /**********************
     * 10) ÂàùÂßãÂåñÊáâÁî®
     **********************/
    window.addEventListener('DOMContentLoaded', () => {
      updateStatus('ÂàùÂßãÂåñ‰∏≠');
      updateVoice('ËÄÅ‰∫∫ËøîÂÆ∂ËºîÂä©Â∞éËà™Á≥ªÁµ±ÂïüÂãï‰∏≠...');
      
      // Á∂ÅÂÆöÊåâÈàï‰∫ã‰ª∂
      document.getElementById('btnStart').addEventListener('click', startDetection);
      document.getElementById('btnStop').addEventListener('click', stopDetection);
      document.getElementById('btnVoice').addEventListener('click', toggleVoice);
      document.getElementById('btnMode').addEventListener('click', toggleMode);
      document.getElementById('btnSetHome').addEventListener('click', () => gpsNavigator.setHomeLocation());
      document.getElementById('btnReturnHome').addEventListener('click', () => gpsNavigator.startReturnHome());
      document.getElementById('btnLoadModule').addEventListener('click', loadEnvironmentModule);
      document.getElementById('btnInfrared').addEventListener('click', toggleInfrared);
      document.getElementById('btnEmergency').addEventListener('click', emergencyAlert);
      
      // ÂàùÂßãÂåñ TensorFlow.js COCO-SSD Ê®°Âûã
      initModel();
    });

    // Èò≤Ê≠¢È†ÅÈù¢‰ºëÁú†
    let wakeLock = null;
    async function requestWakeLock() {
      try {
        if ('wakeLock' in navigator) {
          wakeLock = await navigator.wakeLock.request('screen');
        }
      } catch (err) {
        console.log('Wake Lock Â§±Êïó:', err.message);
      }
    }

    document.addEventListener('visibilitychange', async () => {
      if (document.visibilityState === 'visible' && isDetecting) {
        await requestWakeLock();
      }
    });

    requestWakeLock();
  </script>
</body>
</html>