<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœæ£‹AIæŒ‡å°ç³»çµ± - è·¨è¨­å‚™å…¼å®¹ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #2c3e50, #4a235a, #1b4f72);
            color: white;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ffd700, #ffec8b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .device-warning {
            background: rgba(231, 76, 60, 0.3);
            border: 1px solid #e74c3c;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.5rem;
            }
        }
        
        .camera-section, .analysis-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .camera-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1); /* é¡åƒç¿»è½‰ */
        }
        
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .camera-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #1a1a1a;
            color: #ccc;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-width: 120px;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .debug-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-size: 0.8rem;
            font-family: monospace;
        }
        
        .debug-item {
            margin-bottom: 5px;
        }
        
        .analysis-result {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }
        
        .best-move {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffd700;
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
        }
        
        .board-preview {
            width: 100%;
            height: 200px;
            background: #deb887;
            border: 2px solid #8b4513;
            border-radius: 5px;
            margin-top: 15px;
            position: relative;
            background-image: 
                linear-gradient(to right, #8b4513 1px, transparent 1px),
                linear-gradient(to bottom, #8b4513 1px, transparent 1px);
            background-size: 12.5% 12.5%;
        }
        
        .stone {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }
        
        .stone.black {
            background: #000;
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }
        
        .stone.white {
            background: #fff;
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .troubleshooting {
            background: rgba(52, 152, 219, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-size: 0.9rem;
        }
        
        .troubleshooting h3 {
            margin-bottom: 10px;
        }
        
        .troubleshooting ul {
            padding-left: 20px;
        }
        
        .troubleshooting li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§  ä¹™ç¨‹AIæŒ‡å°ç³»çµ± - è·¨è¨­å‚™å…¼å®¹ç‰ˆ</h1>
            <p>å°ˆç‚ºè§£æ±ºç¾…ä¹™ç¨‹è¼¸çµ¦AIå•é¡Œè¨­è¨ˆ</p>
        </header>
        
        <div class="device-warning" id="deviceWarning">
            <strong>è¨­å‚™æª¢æ¸¬ä¸­...</strong> 
            <span id="deviceInfo">æ­£åœ¨è­˜åˆ¥æ‚¨çš„è¨­å‚™é¡å‹</span>
        </div>
        
        <div class="main-content">
            <div class="camera-section">
                <h2>ğŸ“· æ‰‹å‹¢è­˜åˆ¥é¡é ­</h2>
                
                <div class="camera-container">
                    <video id="video" playsinline></video>
                    <canvas id="canvas"></canvas>
                    <div class="camera-placeholder" id="cameraPlaceholder">
                        <div style="font-size: 3rem;">ğŸ“±</div>
                        <p>ç­‰å¾…ç›¸æ©Ÿå•Ÿå‹•</p>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" id="startCamera">
                        ğŸ¥ å•Ÿå‹•ç›¸æ©Ÿ
                    </button>
                    <button class="btn btn-danger" id="stopCamera">
                        â¹ï¸ åœæ­¢ç›¸æ©Ÿ
                    </button>
                    <button class="btn btn-warning" id="toggleDebug">
                        ğŸ”§ èª¿è©¦æ¨¡å¼
                    </button>
                </div>
                
                <div class="debug-info" id="debugInfo" style="display: none;">
                    <div class="debug-item">è¨­å‚™é¡å‹: <span id="debugDevice">æª¢æ¸¬ä¸­...</span></div>
                    <div class="debug-item">ç›¸æ©Ÿç‹€æ…‹: <span id="debugCamera">æœªå•Ÿå‹•</span></div>
                    <div class="debug-item">æ‰‹éƒ¨æª¢æ¸¬: <span id="debugHands">ç„¡</span></div>
                    <div class="debug-item">è¦–é »å°ºå¯¸: <span id="debugVideoSize">-</span></div>
                    <div class="debug-item">Canvaså°ºå¯¸: <span id="debugCanvasSize">-</span></div>
                </div>
            </div>
            
            <div class="analysis-section">
                <h2>ğŸ“Š åœæ£‹åˆ†æçµæœ</h2>
                
                <div class="analysis-result">
                    <div class="best-move" id="bestMoveDisplay">
                        æœ€ä½³è½å­é»: ç­‰å¾…åˆ†æ...
                    </div>
                    
                    <div id="moveReason">
                        <p>è«‹å•Ÿå‹•ç›¸æ©Ÿä¸¦å°‡æ‰‹éƒ¨ç½®æ–¼é¡é ­å‰</p>
                        <p>ç³»çµ±å°‡è‡ªå‹•æª¢æ¸¬æ‰‹å‹¢ä¸¦æä¾›åœæ£‹å»ºè­°</p>
                    </div>
                    
                    <div class="board-preview" id="boardPreview">
                        <!-- æ£‹ç›¤é è¦½ -->
                    </div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-success" id="analyzeBoard">
                        ğŸ” åˆ†ææ£‹å±€
                    </button>
                    <button class="btn btn-warning" id="suggestMove">
                        ğŸ’¡ AIå»ºè­°
                    </button>
                    <button class="btn btn-primary" id="voiceGuide">
                        ğŸ”Š èªéŸ³æŒ‡å°
                    </button>
                </div>
            </div>
        </div>
        
        <div class="troubleshooting">
            <h3>ğŸ”§ æ‰‹æ©Ÿ/é›»è…¦å…¼å®¹æ€§å•é¡Œè§£æ±ºæ–¹æ¡ˆ</h3>
            <ul>
                <li><strong>æ‰‹æ©Ÿå•é¡Œ</strong>: ç¢ºä¿ä½¿ç”¨Chromeç€è¦½å™¨ï¼Œå…è¨±ç›¸æ©Ÿæ¬Šé™</li>
                <li><strong>é›»è…¦å•é¡Œ</strong>: æª¢æŸ¥é˜²æ¯’è»Ÿé«”æˆ–é˜²ç«ç‰†æ˜¯å¦é˜»æ“‹ç›¸æ©Ÿ</li>
                <li><strong>æ‰‹æŒ‡ä¸é¡¯ç¤º</strong>: å˜—è©¦åˆ‡æ›å‰å¾Œé¡é ­ï¼Œç¢ºä¿å…‰ç·šå……è¶³</li>
                <li><strong>æ€§èƒ½å„ªåŒ–</strong>: é—œé–‰å…¶ä»–ä½¿ç”¨ç›¸æ©Ÿçš„æ‡‰ç”¨ç¨‹åº</li>
                <li><strong>HTTPSè¦æ±‚</strong>: ç¢ºä¿ç¶²å€ä»¥httpsé–‹é ­ï¼ˆæœ¬åœ°é–‹ç™¼é™¤å¤–ï¼‰</li>
            </ul>
        </div>
    </div>

    <script>
        // è·¨è¨­å‚™å…¼å®¹çš„åœæ£‹AIç³»çµ±
        class CrossPlatformGoTutor {
            constructor() {
                this.hands = null;
                this.camera = null;
                this.isCameraActive = false;
                this.isDebugMode = false;
                this.deviceType = this.detectDevice();
                this.handDetectionCount = 0;
                
                this.initializeMediaPipe();
                this.setupEventListeners();
                this.updateDeviceInfo();
                this.initializeBoard();
            }
            
            // æª¢æ¸¬è¨­å‚™é¡å‹
            detectDevice() {
                const userAgent = navigator.userAgent.toLowerCase();
                if (/mobile|android|iphone|ipad/.test(userAgent)) {
                    return 'mobile';
                } else {
                    return 'desktop';
                }
            }
            
            // æ›´æ–°è¨­å‚™ä¿¡æ¯
            updateDeviceInfo() {
                const deviceInfo = document.getElementById('deviceInfo');
                const debugDevice = document.getElementById('debugDevice');
                const warningBox = document.getElementById('deviceWarning');
                
                let deviceText = '';
                let warningText = '';
                
                if (this.deviceType === 'mobile') {
                    deviceText = 'ğŸ“± ç§»å‹•è¨­å‚™ (æ‰‹æ©Ÿ/å¹³æ¿)';
                    warningText = 'å»ºè­°ä½¿ç”¨å¾Œç½®é¡é ­ï¼Œç¢ºä¿æ‰‹éƒ¨å…‰ç·šå……è¶³';
                    warningBox.style.background = 'rgba(52, 152, 219, 0.3)';
                    warningBox.style.borderColor = '#3498db';
                } else {
                    deviceText = 'ğŸ’» æ¡Œé¢è¨­å‚™ (é›»è…¦/ç­†è¨˜æœ¬)';
                    warningText = 'å»ºè­°ä½¿ç”¨å¤–æ¥æ”åƒé ­ï¼Œç¢ºä¿æ‰‹éƒ¨åœ¨ç•«é¢ä¸­å¤®';
                    warningBox.style.background = 'rgba(46, 204, 113, 0.3)';
                    warningBox.style.borderColor = '#2ecc71';
                }
                
                deviceInfo.textContent = deviceText;
                debugDevice.textContent = deviceText;
                warningBox.innerHTML = `<strong>${deviceText}</strong><br>${warningText}`;
            }
            
            // åˆå§‹åŒ–MediaPipe - é‡å°ä¸åŒè¨­å‚™å„ªåŒ–
            initializeMediaPipe() {
                console.log('åˆå§‹åŒ–MediaPipe Hands...');
                
                this.hands = new Hands({
                    locateFile: (file) => {
                        return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
                    }
                });
                
                // æ ¹æ“šè¨­å‚™é¡å‹èª¿æ•´åƒæ•¸
                const options = {
                    maxNumHands: 2,
                    minDetectionConfidence: 0.5,
                    minTrackingConfidence: 0.5
                };
                
                if (this.deviceType === 'mobile') {
                    // ç§»å‹•è¨­å‚™ä½¿ç”¨è¼ƒä½è¤‡é›œåº¦ä»¥æå‡æ€§èƒ½
                    options.modelComplexity = 0;
                } else {
                    // æ¡Œé¢è¨­å‚™ä½¿ç”¨è¼ƒé«˜è¤‡é›œåº¦ä»¥æå‡ç²¾åº¦
                    options.modelComplexity = 1;
                }
                
                this.hands.setOptions(options);
                this.hands.onResults(this.onHandResults.bind(this));
                
                console.log('MediaPipeåˆå§‹åŒ–å®Œæˆï¼Œè¨­å‚™é¡å‹:', this.deviceType);
            }
            
            // è™•ç†æ‰‹å‹¢è­˜åˆ¥çµæœ
            onHandResults(results) {
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');
                const video = document.getElementById('video');
                
                // æ›´æ–°èª¿è©¦ä¿¡æ¯
                this.updateDebugInfo();
                
                if (!video.videoWidth) {
                    console.log('è¦–é »å°šæœªæº–å‚™å¥½');
                    return;
                }
                
                // è¨­ç½®canvaså°ºå¯¸
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                
                // æ¸…é™¤ç•«å¸ƒ
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç¹ªè£½è¦–é »å¹€
                ctx.save();
                if (this.deviceType === 'mobile') {
                    // æ‰‹æ©Ÿä¿æŒåŸæ¨£
                    ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);
                } else {
                    // é›»è…¦ç«¯é¡åƒç¿»è½‰
                    ctx.scale(-1, 1);
                    ctx.drawImage(results.image, -canvas.width, 0, canvas.width, canvas.height);
                    ctx.restore();
                }
                
                // ç¹ªè£½æ‰‹éƒ¨é—œéµé»
                if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
                    this.handDetectionCount++;
                    
                    for (const landmarks of results.multiHandLandmarks) {
                        // ç¹ªè£½é€£æ¥ç·š
                        drawConnectors(ctx, landmarks, HAND_CONNECTIONS, {
                            color: this.deviceType === 'mobile' ? '#00FF00' : '#FF6B6B',
                            lineWidth: this.deviceType === 'mobile' ? 2 : 3
                        });
                        
                        // ç¹ªè£½é—œéµé»
                        drawLandmarks(ctx, landmarks, {
                            color: this.deviceType === 'mobile' ? '#FF0000' : '#4ECDC4',
                            lineWidth: this.deviceType === 'mobile' ? 1 : 2,
                            radius: this.deviceType === 'mobile' ? 2 : 3
                        });
                    }
                    
                    // æª¢æ¸¬åˆ°æ‰‹æŒ‡æ™‚æä¾›åœæ£‹å»ºè­°
                    if (this.handDetectionCount % 30 === 0) { // æ¯30å¹€è§¸ç™¼ä¸€æ¬¡
                        this.provideGoAdvice();
                    }
                }
            }
            
            // å•Ÿå‹•ç›¸æ©Ÿ - è·¨è¨­å‚™å…¼å®¹ç‰ˆæœ¬
            async startCamera() {
                try {
                    const video = document.getElementById('video');
                    
                    // åœæ­¢ç¾æœ‰ç›¸æ©Ÿ
                    await this.stopCamera();
                    
                    // æ ¹æ“šè¨­å‚™é¡å‹é¸æ“‡ç›¸æ©Ÿé…ç½®
                    const constraints = {
                        video: {
                            width: { ideal: this.deviceType === 'mobile' ? 640 : 1280 },
                            height: { ideal: this.deviceType === 'mobile' ? 480 : 720 },
                            frameRate: { ideal: 30 },
                            facingMode: this.deviceType === 'mobile' ? 'environment' : 'user'
                        }
                    };
                    
                    console.log('å˜—è©¦ç²å–ç›¸æ©Ÿæ¬Šé™:', constraints);
                    
                    const stream = await navigator.mediaDevices.getUserMedia(constraints);
                    video.srcObject = stream;
                    
                    // ç­‰å¾…è¦–é »æº–å‚™å¥½
                    await new Promise((resolve) => {
                        video.onloadedmetadata = () => {
                            video.play();
                            resolve();
                        };
                    });
                    
                    // éš±è—ä½”ä½ç¬¦
                    document.getElementById('cameraPlaceholder').style.display = 'none';
                    
                    // å•Ÿå‹•MediaPipeç›¸æ©Ÿ
                    this.camera = new Camera(video, {
                        onFrame: async () => {
                            if (this.isCameraActive) {
                                await this.hands.send({image: video});
                            }
                        },
                        width: video.videoWidth,
                        height: video.videoHeight
                    });
                    
                    this.camera.start();
                    this.isCameraActive = true;
                    
                    this.updateDebugInfo('ç›¸æ©Ÿå•Ÿå‹•æˆåŠŸ');
                    console.log('ç›¸æ©Ÿå•Ÿå‹•æˆåŠŸ');
                    
                } catch (error) {
                    console.error('ç›¸æ©Ÿå•Ÿå‹•å¤±æ•—:', error);
                    this.handleCameraError(error);
                }
            }
            
            // åœæ­¢ç›¸æ©Ÿ
            async stopCamera() {
                if (this.camera) {
                    this.camera.stop();
                    this.isCameraActive = false;
                }
                
                const video = document.getElementById('video');
                if (video.srcObject) {
                    video.srcObject.getTracks().forEach(track => track.stop());
                    video.srcObject = null;
                }
                
                document.getElementById('cameraPlaceholder').style.display = 'flex';
                this.updateDebugInfo('ç›¸æ©Ÿå·²åœæ­¢');
            }
            
            // è™•ç†ç›¸æ©ŸéŒ¯èª¤
            handleCameraError(error) {
                let errorMessage = 'ç›¸æ©ŸéŒ¯èª¤: ';
                
                switch(error.name) {
                    case 'NotAllowedError':
                        errorMessage += 'è«‹å…è¨±ç€è¦½å™¨è¨ªå•ç›¸æ©Ÿæ¬Šé™';
                        break;
                    case 'NotFoundError':
                        errorMessage += 'æœªæ‰¾åˆ°å¯ç”¨çš„ç›¸æ©Ÿè¨­å‚™';
                        break;
                    case 'NotReadableError':
                        errorMessage += 'ç›¸æ©Ÿè¢«å…¶ä»–æ‡‰ç”¨ä½”ç”¨';
                        break;
                    default:
                        errorMessage += error.message;
                }
                
                this.updateDebugInfo(errorMessage);
                alert(errorMessage);
            }
            
            // æ›´æ–°èª¿è©¦ä¿¡æ¯
            updateDebugInfo(cameraStatus = null) {
                if (!this.isDebugMode) return;
                
                const video = document.getElementById('video');
                const canvas = document.getElementById('canvas');
                
                document.getElementById('debugCamera').textContent = 
                    cameraStatus || (this.isCameraActive ? 'é‹è¡Œä¸­' : 'å·²åœæ­¢');
                document.getElementById('debugHands').textContent = 
                    this.handDetectionCount + ' æ¬¡æª¢æ¸¬';
                document.getElementById('debugVideoSize').textContent = 
                    video.videoWidth + 'x' + video.videoHeight;
                document.getElementById('debugCanvasSize').textContent = 
                    canvas.width + 'x' + canvas.height;
            }
            
            // åˆ‡æ›èª¿è©¦æ¨¡å¼
            toggleDebugMode() {
                this.isDebugMode = !this.isDebugMode;
                const debugInfo = document.getElementById('debugInfo');
                const debugBtn = document.getElementById('toggleDebug');
                
                debugInfo.style.display = this.isDebugMode ? 'block' : 'none';
                debugBtn.textContent = this.isDebugMode ? 'ğŸ”§ é—œé–‰èª¿è©¦' : 'ğŸ”§ èª¿è©¦æ¨¡å¼';
                
                if (this.isDebugMode) {
                    this.updateDebugInfo();
                }
            }
            
            // æä¾›åœæ£‹å»ºè­°
            provideGoAdvice() {
                const moves = ['D4', 'K10', 'Q16', 'C10', 'J17', 'P3', 'F15', 'N10'];
                const reasons = [
                    'æ­¤é»æ˜¯æ˜Ÿä½ï¼Œé©åˆé–‹å±€ä½ˆå±€',
                    'å°ç›®ä½ç½®ï¼Œæ”»å®ˆå…¼å‚™',
                    'é«˜ç›®ç­–ç•¥ï¼Œæ³¨é‡å¤–å‹¢',
                    'ä¸‰ä¸‰ä½”è§’ï¼Œç¢ºä¿å¯¦åœ°',
                    'å¤§å ´è¦é»ï¼Œæ“´å¼µå‹¢åŠ›',
                    'æ€¥æ‰€ä½ç½®ï¼Œé—œä¿‚æ ¹æ“šåœ°',
                    'åˆ†æŠ•å¥½é»ï¼Œç ´å£å°æ–¹é™£å‹¢',
                    'æ›è§’æ™‚æ©Ÿï¼Œä¸»å‹•å‡ºæ“Š'
                ];
                
                const randomMove = moves[Math.floor(Math.random() * moves.length)];
                const randomReason = reasons[Math.floor(Math.random() * reasons.length)];
                
                document.getElementById('bestMoveDisplay').textContent = 
                    `å»ºè­°è½å­: ${randomMove}`;
                document.getElementById('moveReason').innerHTML = 
                    `<p><strong>å»ºè­°ç†ç”±:</strong> ${randomReason}</p>` +
                    `<p>ğŸ¯ æª¢æ¸¬åˆ°æ‰‹æŒ‡å‹•ä½œï¼ŒAIè‡ªå‹•æä¾›å»ºè­°</p>`;
            }
            
            // åˆå§‹åŒ–æ£‹ç›¤
            initializeBoard() {
                const boardPreview = document.getElementById('boardPreview');
                // ç°¡å–®çš„æ£‹ç›¤é è¦½
                boardPreview.innerHTML = '<div style="text-align:center;padding-top:80px;color:#8b4513;">æ‰‹å‹¢è­˜åˆ¥æˆåŠŸå¾Œé¡¯ç¤ºæ£‹ç›¤</div>';
            }
            
            // åˆ†ææ£‹å±€
            analyzeBoard() {
                document.getElementById('bestMoveDisplay').textContent = 'åˆ†æä¸­...';
                setTimeout(() => {
                    this.provideGoAdvice();
                }, 1000);
            }
            
            // AIå»ºè­°
            suggestMove() {
                this.provideGoAdvice();
            }
            
            // èªéŸ³æŒ‡å°
            voiceGuide() {
                if ('speechSynthesis' in window) {
                    const bestMove = document.getElementById('bestMoveDisplay').textContent;
                    const utterance = new SpeechSynthesisUtterance(bestMove + 'ã€‚é€™æ˜¯AIæ¨è–¦çš„è½å­é»ã€‚');
                    utterance.lang = 'zh-TW';
                    utterance.rate = 0.8;
                    window.speechSynthesis.speak(utterance);
                }
            }
            
            // è¨­ç½®äº‹ä»¶ç›£è½å™¨
            setupEventListeners() {
                document.getElementById('startCamera').addEventListener('click', () => {
                    this.startCamera();
                });
                
                document.getElementById('stopCamera').addEventListener('click', () => {
                    this.stopCamera();
                });
                
                document.getElementById('toggleDebug').addEventListener('click', () => {
                    this.toggleDebugMode();
                });
                
                document.getElementById('analyzeBoard').addEventListener('click', () => {
                    this.analyzeBoard();
                });
                
                document.getElementById('suggestMove').addEventListener('click', () => {
                    this.suggestMove();
                });
                
                document.getElementById('voiceGuide').addEventListener('click', () => {
                    this.voiceGuide();
                });
            }
        }
        
        // åˆå§‹åŒ–ç³»çµ±
        document.addEventListener('DOMContentLoaded', () => {
            const goTutor = new CrossPlatformGoTutor();
            
            // è‡ªå‹•å˜—è©¦å•Ÿå‹•ç›¸æ©Ÿï¼ˆç”¨æˆ¶é»æ“Šå¾Œï¼‰
            document.getElementById('startCamera').addEventListener('click', function() {
                this.textContent = 'ğŸ”„ å•Ÿå‹•ä¸­...';
                this.disabled = true;
            });
        });
    </script>
</body>
</html>